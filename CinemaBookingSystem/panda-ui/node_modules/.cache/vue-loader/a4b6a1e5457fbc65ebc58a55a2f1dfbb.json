{"remainingRequest":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\src\\views\\movie\\MovieInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\src\\views\\movie\\MovieInfo.vue","mtime":1715157471624},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002096653},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1715002095676},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002096653},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1715002104692}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNb3ZpZUluZm8iLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBxdWVyeUluZm86IHsNCiAgICAgICAgbW92aWVJZDogJycsDQogICAgICAgIG1vdmllQXJlYTogJ+S4reWbveWkp+mZhicsDQogICAgICAgIG1vdmllTmFtZTogJycsDQogICAgICAgIHN0YXJ0RGF0ZTogJycsDQogICAgICAgIGVuZERhdGU6ICcnLA0KICAgICAgICBwYWdlTnVtOiAxLA0KICAgICAgICBwYWdlU2l6ZTogNw0KICAgICAgfSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MTgxLycsDQogICAgICAvL+aOp+WItuWvueivneahhueahOaYvuekuuS4jumakOiXjw0KICAgICAgYWRkRGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBzZWxlY3RlZE1vdmllQ2F0ZWdvcnk6W10sDQogICAgICBzZWxlY3RlZE1vdmllQXJlYTogJ+S4reWbveWkp+mZhicsDQogICAgICBzZWxlY3RlZERhdGU6IFtdLA0KICAgICAgaW5wdXRNb3ZpZU5hbWU6ICcnLA0KICAgICAgY2F0ZWdvcnlMaXN0OltdLA0KICAgICAgbW92aWVMaXN0OiBbXSwNCiAgICAgIG1vdmllQXJlYUxpc3Q6IFsi5Lit5Zu95aSn6ZmGIiwgIue+juWbvSIsICLpn6nlm70iLCAi5pel5pysIiwgIuS4reWbvemmmea4ryIsICLkuK3lm73lj7Dmub4iLCAi5rOw5Zu9IiwgIuWNsOW6piIsDQogICAgICAgICLms5Xlm70iLCAi6Iux5Zu9IiwgIuS/hOe9l+aWryIsICLmhI/lpKfliKkiLCAi6KW/54+t54mZIiwgIuW+t+WbvSIsICLms6LlhbAiLCAi5r6z5aSn5Yip5LqaIiwgIuS8iuaclyIsICLlhbbku5YiXSwNCiAgICAgIGVkaXRGb3JtOiB7fSwNCiAgICAgIGNoZWNrQWJsZUlkOiB7fSwNCiAgICAgIGVkaXRDYXRlZ29yeUZvcm06W10sDQogICAgICBtb3ZpZUlkOicnLA0KICAgICAgZWRpdERpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZWRpdENhdGVnb3J5VmlzaWJsZTogZmFsc2UsDQogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywNCiAgICAgIGRpc2FibGVkOmZhbHNlLA0KICAgICAgLy/mtLvliqjlsIHpnaLlop7liKDlj5jph48NCiAgICAgIHBvc3RlcjogW10sDQogICAgICAvL+WPkemAgee7meWQjuerr+eahEpTT07lm77niYcNCiAgICAgIHBvc3Rlckw6IFtdLA0KICAgICAgZGVsZXRlUG9zdExpc3Q6W10sDQogICAgICAvL+a3u+WKoOWIoOmZpOWbvueJh+mbhiDliqjmgIHnu5Hlrprlm77niYfliJfooagNCiAgICAgIHBpY3M6IFtdLA0KICAgICAgLy8g5Y+R6YCB57uZ5ZCO56uv55qESlNPTuWbvueJh+aVsOe7hA0KICAgICAgcGljdHVyZUxpc3Q6IFtdLA0KICAgICAgcGljTnVtczowLA0KICAgICAgZGVsZXRlUGljTGlzdDpbXSwNCiAgICAgIC8v5re75Yqg5rS75Yqo6KGo5Y2V5pWw5o2uDQogICAgICBhZGRGb3JtOiB7DQogICAgICAgIG1vdmllSWQ6ICcnLA0KICAgICAgICBtb3ZpZU5hbWU6ICcnLA0KICAgICAgICBtb3ZpZUFyZWE6ICfkuK3lm73lpKfpmYYnLA0KICAgICAgICBtb3ZpZUxlbmd0aDogMCwNCiAgICAgICAgcmVsZWFzZURhdGU6ICcnLA0KICAgICAgICBtb3ZpZUJveE9mZmljZTogJycsDQogICAgICAgIG1vdmllSW50cm9kdWN0aW9uOiAnJywNCiAgICAgICAgbW92aWVQaWN0dXJlczogJycsDQogICAgICAgIG1vdmllUG9zdGVyOicnDQogICAgICB9LA0KICAgICAgLy/mt7vliqDpqozor4HooajljZXop4TliJnlr7nosaENCiAgICAgIGFkZEZvcm1SdWxlczogew0KICAgICAgICBtb3ZpZU5hbWU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmtLvliqjlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIG1vdmllQXJlYTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqea0u+WKqOWMuuWfnycsIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIC8v5L+u5pS56aqM6K+B6KGo5Y2V6KeE5YiZ5a+56LGhDQogICAgICBlZGl0Rm9ybVJ1bGVzOiB7DQogICAgICAgIG1vdmllTmFtZTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpea0u+WKqOWQjeensCcsIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgbW92aWVBcmVhOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rS75Yqo5Yy65Z+fJywgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkNCiAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRNb3ZpZUxpc3QoKSB7DQogICAgICB0aGlzLnF1ZXJ5SW5mby5tb3ZpZU5hbWUgPSB0aGlzLmlucHV0TW92aWVOYW1lDQogICAgICB0aGlzLnF1ZXJ5SW5mby5tb3ZpZUFyZWEgPSB0aGlzLnNlbGVjdGVkTW92aWVBcmVhDQogICAgICBpZiAoIXRoaXMuc2VsZWN0ZWREYXRlKSB7DQogICAgICAgIHRoaXMucXVlcnlJbmZvLnN0YXJ0RGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlWzBdDQogICAgICAgIHRoaXMucXVlcnlJbmZvLmVuZERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVsxXQ0KICAgICAgfQ0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgYXhpb3MuZ2V0KCdzeXNNb3ZpZS9maW5kJywge3BhcmFtczogX3RoaXMucXVlcnlJbmZvfSkudGhlbihyZXNwID0+IHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzcCkNCiAgICAgICAgX3RoaXMubW92aWVMaXN0ID0gcmVzcC5kYXRhLmRhdGE7DQogICAgICAgIF90aGlzLnRvdGFsID0gcmVzcC5kYXRhLnRvdGFsOw0KICAgICAgICBfdGhpcy5xdWVyeUluZm8ucGFnZVNpemUgPSByZXNwLmRhdGEucGFnZVNpemU7DQogICAgICAgIF90aGlzLnF1ZXJ5SW5mby5wYWdlTnVtID0gcmVzcC5kYXRhLnBhZ2VOdW07DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q2F0ZWdvcnlMaXN0KCkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBheGlvcy5nZXQoJ3N5c01vdmllQ2F0ZWdvcnkvZmluZCcpLnRoZW4ocmVzcD0+ew0KICAgICAgICBfdGhpcy5jYXRlZ29yeUxpc3QgPSByZXNwLmRhdGEuZGF0YTsNCiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuY2F0ZWdvcnlMaXN0KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGlmU2hvdyhpZCkgew0KICAgICAgbGV0IGwgPSB0cnVlDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZWRpdENhdGVnb3J5Rm9ybS5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAoaWQgPT09IHRoaXMuZWRpdENhdGVnb3J5Rm9ybVtpXS5tb3ZpZUNhdGVnb3J5SWQpIHsNCiAgICAgICAgICBsID1mYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gbA0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7DQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IG5ld1NpemUNCiAgICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkNCiAgICAgIGNvbnNvbGUubG9nKG5ld1NpemUpDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsNCiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VOdW0gPSBuZXdQYWdlDQogICAgICB0aGlzLmdldE1vdmllTGlzdCgpDQogICAgICBjb25zb2xlLmxvZyhuZXdQYWdlKQ0KICAgIH0sDQogICAgYXN5bmMgc3VibWl0RmlsZSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpY3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgICAgaWYgKHRoaXMucGljc1tpXS5zdGF0dXMgPT09ICdzdWNjZXNzJykgew0KICAgICAgICAgIGxldCBzID0gdGhpcy5waWNzW2ldLnVybA0KICAgICAgICAgIHRoaXMucGljdHVyZUxpc3QucHVzaChzLnN1YnN0cmluZyhzLmluZGV4T2YoJy9pbWFnZXMnKSkpDQogICAgICAgICAgY29udGludWUNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZmlsZSA9IHRoaXMucGljc1tpXS5yYXcNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSkNCiAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgndXBsb2FkL21vdmllJywgZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIF90aGlzLnBpY3R1cmVMaXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgc3VibWl0RmlsZVAoKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXMNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3N0ZXIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgICAgaWYgKHRoaXMucG9zdGVyW2ldLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7DQogICAgICAgICAgbGV0IHMgPSB0aGlzLnBvc3RlcltpXS51cmwNCiAgICAgICAgICB0aGlzLnBvc3RlckwucHVzaChzLnN1YnN0cmluZyhzLmluZGV4T2YoJy9pbWFnZXMnKSkpDQogICAgICAgICAgY29udGludWUNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZmlsZSA9IHRoaXMucG9zdGVyW2ldLnJhdw0KICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKQ0KICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCd1cGxvYWQvbW92aWUnLCBmb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgX3RoaXMucG9zdGVyTC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOebkeWQrOa3u+WKoOWvueivneahhueahOWFs+mXreS6i+S7tg0KICAgIGFkZERpYWxvZ0Nsb3NlZCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybVJlZi5yZXNldEZpZWxkcygpDQogICAgICB0aGlzLiRyZWZzLnBpY3R1cmVSZWYuY2xlYXJGaWxlcygpDQogICAgICB0aGlzLiRyZWZzLnBvc3RlclJlZi5jbGVhckZpbGVzKCkNCiAgICAgIHRoaXMucG9zdGVyID0gW10NCiAgICAgIHRoaXMucG9zdGVyTD1bXQ0KICAgICAgdGhpcy5waWNzID0gW10NCiAgICAgIHRoaXMucGljdHVyZUxpc3QgPSBbXQ0KICAgIH0sDQogICAgLy8g55uR5ZCs5re75Yqg5oyJ6ZKuDQogICAgYXN5bmMgYWRkTW92aWUoKSB7DQogICAgICBhd2FpdCB0aGlzLnN1Ym1pdEZpbGUoKQ0KICAgICAgYXdhaXQgdGhpcy5zdWJtaXRGaWxlUCgpDQogICAgICB0aGlzLmFkZEZvcm0ubW92aWVQaWN0dXJlcyA9IEpTT04uc3RyaW5naWZ5KHRoaXMucGljdHVyZUxpc3QpDQogICAgICB0aGlzLmFkZEZvcm0ubW92aWVQb3N0ZXIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBvc3RlckwpDQogICAgICBjb25zdCBfdGhpcyA9IHRoaXMNCiAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHZhbGlkKQ0KICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4NCiAgICAgICAgLy/pooTmoKHpqozmiJDlip/vvIzlj5HnvZHnu5zor7fmsYINCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCdzeXNNb3ZpZScsIEpTT04uc3RyaW5naWZ5KF90aGlzLmFkZEZvcm0pKS50aGVuKHJlc3AgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApDQogICAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOa0u+WKqOS/oeaBr+Wksei0pe+8gScpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAvL+makOiXj+a3u+WKoOWvueivneahhg0KICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAvL+mHjeaWsOWKoOi9veWIl+ihqA0KICAgICAgICB0aGlzLmdldE1vdmllTGlzdCgpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5rS75Yqo5L+h5oGv5oiQ5Yqf77yBJykNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDnm5HlkKzkv67mlLnlr7nor53moYbnmoTlhbPpl63kuovku7YNCiAgICBlZGl0RGlhbG9nQ2xvc2VkKCkgew0KICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi5yZXNldEZpZWxkcygpDQogICAgICB0aGlzLiRyZWZzLnBpY3R1cmVFZGl0UmVmLmNsZWFyRmlsZXMoKQ0KICAgICAgdGhpcy4kcmVmcy5wb3N0ZXJFZGl0UmVmLmNsZWFyRmlsZXMoKQ0KICAgICAgdGhpcy5waWNzID0gW10NCiAgICAgIHRoaXMucGljdHVyZUxpc3QgPSBbXQ0KICAgICAgdGhpcy5wb3N0ZXJMID0gW10NCiAgICAgIHRoaXMucG9zdGVyID0gW10NCiAgICB9LA0KICAgIC8v55uR5ZCs5L+u5pS557G75Yir5a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2DQogICAgZWRpdENhdGVnb3J5RGlhbG9nQ2xvc2VkKCl7DQogICAgICB0aGlzLnNlbGVjdGVkTW92aWVDYXRlZ29yeSA9ICcnDQogICAgfSwNCiAgICAvLyDkv67mlLnmtLvliqjkv6Hmga/lr7nor53moYYNCiAgICBhc3luYyBlZGl0TW92aWVJbmZvKCkgew0KICAgICAgYXdhaXQgdGhpcy5zdWJtaXRGaWxlKCkNCiAgICAgIHRoaXMuZWRpdEZvcm0ubW92aWVQaWN0dXJlcyA9IEpTT04uc3RyaW5naWZ5KHRoaXMucGljdHVyZUxpc3QpDQogICAgICBhd2FpdCB0aGlzLnN1Ym1pdEZpbGVQKCkNCiAgICAgIHRoaXMuZWRpdEZvcm0ubW92aWVQb3N0ZXIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBvc3RlckwpDQogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICAgIGlmICghdmFsaWQpIHJldHVybg0KICAgICAgICBsZXQgc3VjY2VzcyA9IHRydWUNCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wdXRbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIGF3YWl0IGF4aW9zLnB1dCgnc3lzTW92aWUnLCBKU09OLnN0cmluZ2lmeShfdGhpcy5lZGl0Rm9ybSkpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUuea0u+WKqOS/oeaBr+Wksei0pe+8gScpDQogICAgICAgICAgICBzdWNjZXNzID0gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIGlmICghc3VjY2VzcykgcmV0dXJuDQogICAgICAgIGZvcihsZXQgcyBvZiB0aGlzLmRlbGV0ZVBpY0xpc3Qpew0KICAgICAgICAgIGF3YWl0IGF4aW9zLmdldCgnL3VwbG9hZC9kZWxldGU/ZmlsZVBhdGg9JyArIHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSkNCiAgICAgICAgfQ0KICAgICAgICBmb3IobGV0IHMgb2YgdGhpcy5kZWxldGVQb3N0TGlzdCl7DQogICAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KCcvdXBsb2FkL2RlbGV0ZT9maWxlUGF0aD0nICsgcy5zdWJzdHJpbmcocy5pbmRleE9mKCcvaW1hZ2VzJykpKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICB0aGlzLmdldE1vdmllTGlzdCgpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55rS75Yqo5L+h5oGv5oiQ5Yqf77yBJykNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZWxpc3QpIHsNCiAgICAgIHRoaXMucGljcyA9IGZpbGVsaXN0LnNsaWNlKDApDQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY3MpDQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2VQKGZpbGUsIGZpbGVsaXN0KSB7DQogICAgICB0aGlzLnBvc3RlciA9IGZpbGVsaXN0DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBvc3RlcikNCiAgICB9LA0KICAgIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UpIHsNCiAgICAgIHRoaXMucGljdHVyZUxpc3QucHVzaChyZXNwb25zZS5kYXRhKQ0KICAgICAgdGhpcy5hZGRGb3JtID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCkNCiAgICAgIHRoaXMuZWRpdEZvcm0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY3R1cmVMaXN0KQ0KICAgIH0sDQogICAgaGFuZGxlU3VjY2Vzc1AocmVzcG9uc2UpIHsNCiAgICAgIHRoaXMucG9zdGVyTC5wdXNoKHJlc3BvbnNlLmRhdGEpDQogICAgICB0aGlzLmFkZEZvcm0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBvc3RlckwpDQogICAgICB0aGlzLmVkaXRGb3JtID0gSlNPTi5zdHJpbmdpZnkodGhpcy5wb3N0ZXJMKQ0KICAgIH0sDQogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsNCiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXdQKGZpbGUpIHsNCiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVSZW1vdmUoZmlsZSxmaWxlbGlzdCkgew0KICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnVybA0KICAgICAgY29uc29sZS5sb2coZmlsZVBhdGgpDQogICAgICBjb25zdCBpZHggPSB0aGlzLnBpY3MuZmluZEluZGV4KHggPT4geC51cmwgPT09IGZpbGVQYXRoKQ0KICAgICAgaWYoZmlsZS5zdGF0dXMgPT09ICdzdWNjZXNzJyl7DQogICAgICAgIHRoaXMuZGVsZXRlUGljTGlzdC5wdXNoKGZpbGUudXJsKQ0KICAgICAgfQ0KICAgICAgdGhpcy5waWNzLnNwbGljZShpZHgsIDEpDQogICAgfSwNCiAgICBoYW5kbGVSZW1vdmVQKGZpbGUpIHsNCiAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZS51cmwNCiAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKQ0KICAgICAgY29uc3QgaWR4ID0gdGhpcy5wb3N0ZXIuZmluZEluZGV4KHg9PiB4LnVybCA9PT0gZmlsZVBhdGgpDQogICAgICBpZihmaWxlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKXsNCiAgICAgICAgdGhpcy5kZWxldGVQb3N0TGlzdC5wdXNoKGZpbGUudXJsKQ0KICAgICAgfQ0KICAgICAgdGhpcy5wb3N0ZXIuc3BsaWNlKGlkeCwxKQ0KICAgIH0sDQogICAgaGFuZGxlRXJyb3IoZXJyKSB7DQogICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgfSwNCiAgICB0b01vdmllSW5mbyhpZCkgew0KICAgICAgd2luZG93Lm9wZW4oJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9tb3ZpZUluZm8vJyArIGlkKQ0KICAgIH0sDQogICAgaXNBYmxlRWRpdChpZCkgew0KICAgICAgdGhpcy5jaGVja0FibGVJZC5tb3ZpZUlkID0gaWQNCiAgICAgIGF4aW9zLmdldCgnc3lzU2Vzc2lvbi9pc0FibGVFZGl0Jywge3BhcmFtczogdGhpcy5jaGVja0FibGVJZH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnRvdGFsKQ0KICAgICAgICBsZXQgc2Vzc2lvbnMgPSByZXNwb25zZS5kYXRhLmRhdGENCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudG90YWwgPT09IDApIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygn56m655qE5Y+v5pS5JykNCiAgICAgICAgICB0aGlzLnNob3dFZGl0RGlhbG9nKGlkKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCfkv67mlLnliY3liKTmlq3mnInmnKrlrozmiJBzZXNzaW9uJykNCiAgICAgICAgICBsZXQgc2Vzc2lvbklkcyA9ICcnDQogICAgICAgICAgZm9yIChsZXQgdGVtcCBvZiBzZXNzaW9ucykgew0KICAgICAgICAgICAgY29uc29sZS5sb2codGVtcCkNCiAgICAgICAgICAgIHNlc3Npb25JZHMgKz0gdGVtcC5zZXNzaW9uSWQrJyAnDQogICAgICAgICAgfQ0KICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXNzaW9uSWRzIGlzIDogJytzZXNzaW9uSWRzKQ0KICAgICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHmnInmnKrlrozmiJDmtLvliqjlnLrmrKHvvIzkuI3og73kv67mlLnmtLvliqjkv6Hmga/jgIJcbicrJ+WvvOiHtOW8guW4uOeahOWcuuasoee8luWPt+S4ujogJytzZXNzaW9uSWRzLCAn5L+u5pS56K+35rGC5byC5bi46YCa55+lJywgew0KICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLA0KICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbW92aWUnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmmL7npLrkv67mlLnlr7nor53moYbvvIzlm57mmL7mlbDmja4NCiAgICBhc3luYyBzaG93RWRpdERpYWxvZyhpZCkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBhd2FpdCBheGlvcy5nZXQoJ3N5c01vdmllL2ZpbmQvJyArIGlkKS50aGVuKHJlc3AgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQ0KICAgICAgICBfdGhpcy5lZGl0Rm9ybSA9IHJlc3AuZGF0YS5kYXRhDQogICAgICB9KQ0KICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEpTT04ucGFyc2UodGhpcy5lZGl0Rm9ybS5tb3ZpZVBpY3R1cmVzKSkgew0KICAgICAgICBsZXQgcGljID0ge30NCiAgICAgICAgcGljWyduYW1lJ10gPSAnJw0KICAgICAgICBwaWNbJ3VybCddID0gdGhpcy5nbG9iYWwuYmFzZSArIGl0ZW0NCiAgICAgICAgdGhpcy5waWNzLnB1c2gocGljKQ0KICAgICAgfQ0KICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEpTT04ucGFyc2UodGhpcy5lZGl0Rm9ybS5tb3ZpZVBvc3RlcikpIHsNCiAgICAgICAgbGV0IHBpYyA9IHt9DQogICAgICAgIHBpY1snbmFtZSddID0gJycNCiAgICAgICAgcGljWyd1cmwnXSA9IHRoaXMuZ2xvYmFsLmJhc2UgKyBpdGVtDQogICAgICAgIHRoaXMucG9zdGVyLnB1c2gocGljKQ0KICAgICAgfQ0KICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8v5pi+56S65L+u5pS557G75Yir5a+56K+d5qGGLOWbnuaYvuaVsOaNrg0KICAgIGFzeW5jIHNob3dFZGl0Q2F0ZWdvcnlEaWFsb2coaWQpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBfdGhpcy5tb3ZpZUlkID0gaWQNCiAgICAgIGF3YWl0IGF4aW9zLmdldCgnc3lzTW92aWUvZmluZC8nK2lkKS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgIF90aGlzLmVkaXRDYXRlZ29yeUZvcm0gPSByZXNwb25zZS5kYXRhLmRhdGEubW92aWVDYXRlZ29yeUxpc3QNCiAgICAgICAgfSkNCiAgICAgIHRoaXMuZWRpdENhdGVnb3J5VmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8v5Y+W5raI5L+u5pS5DQogICAgY2FuY2VsRWRpdCgpew0KICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICB0aGlzLmRlbGV0ZVBpY0xpc3Quc3BsaWNlKDAsdGhpcy5kZWxldGVQaWNMaXN0Lmxlbmd0aCkNCiAgICAgIHRoaXMuZGVsZXRlUG9zdExpc3Quc3BsaWNlKDAsdGhpcy5kZWxldGVQb3N0TGlzdC5sZW5ndGgpDQogICAgfSwNCiAgICAvLyDnm5HlkKzlpJrpgInmoYblj5jljJYNCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsDQogICAgfSwNCiAgICAvLyDmibnph4/liKDpmaTliY3moKHpqowNCiAgICBhc3luYyBpc0FibGVNdWx0aXBsZURlbGV0ZSgpIHsNCiAgICAgIGxldCBhYmxlRGVsZXRlID0gdHJ1ZQ0KICAgICAgbGV0IGlkcyA9ICcnDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdGhpcy5jaGVja0FibGVJZC5tb3ZpZUlkID0gdGhpcy5tdWx0aXBsZVNlbGVjdGlvbltpXS5tb3ZpZUlkDQogICAgICAgIGNvbnN0IHsgZGF0YSA6IHJlcyB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uL2lzQWJsZUVkaXQnLCB7cGFyYW1zOiB0aGlzLmNoZWNrQWJsZUlkfSkNCiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgIGlkcyArPSB0aGlzLm11bHRpcGxlU2VsZWN0aW9uW2ldLm1vdmllSWQgKyAnICcNCiAgICAgICAgICBhYmxlRGVsZXRlID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGFibGVEZWxldGUgPT09IGZhbHNlKSB7DQogICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHmnInmnKrlrozmiJDmtLvliqjlnLrmrKHvvIzkuI3og73mibnph4/liKDpmaTmtLvliqjkv6Hmga/jgIJcbicgKyAn5a+86Ie05byC5bi455qE5rS75Yqo57yW5Y+35Li6OiAnICsgaWRzLCAn5om56YeP5Yig6Zmk6K+35rGC5byC5bi46YCa55+lJywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5oiR55+l6YGT5LqGJywNCiAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbW92aWUnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBhd2FpdCB0aGlzLm11bHRpcGxlRGVsZXRlKCkNCiAgICB9LA0KICAgIC8vIOaJuemHj+WIoOmZpOa0u+WKqA0KICAgIGFzeW5jIG11bHRpcGxlRGVsZXRlKCkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICAvL+ivoumXrueUqOaIt+aYr+WQpuehruiupOWIoOmZpA0KICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOi/meS6m+adoeebriwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikNCg0KICAgICAgLy8g55So5oi356Gu6K6k5Yig6ZmkLCByZXNw5Li65a2X56ym5LiyImNvbmZpcm0iDQogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCINCiAgICAgIGlmIChyZXNwID09PSAnY2FuY2VsJykgew0KICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykNCiAgICAgIH0NCg0KICAgICAgbGV0IGlkcyA9IFtdDQogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgIGxldCBpdGVtID0gZGF0YS5tb3ZpZUlkDQogICAgICAgIGlkcy5wdXNoKGl0ZW0pDQogICAgICB9KQ0KICAgICAgY29uc29sZS5sb2coaWRzKQ0KICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCdzeXNNb3ZpZS8nICsgaWRzLCBKU09OLnN0cmluZ2lmeShpZHMpKS50aGVuKHJlc3AgPT4gew0KICAgICAgICBjb25zb2xlLmxvZygxMjMpDQogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSAhPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTmtLvliqjlpLHotKXvvIEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5nZXRNb3ZpZUxpc3QoKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTmtLvliqjmiJDlip/vvIEnKQ0KICAgIH0sDQogICAgYXN5bmMgaXNBYmxlRGVsZXRlKGlkKSB7DQogICAgICB0aGlzLmNoZWNrQWJsZUlkLm1vdmllSWQgPSBpZA0KICAgICAgYXdhaXQgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uL2lzQWJsZUVkaXQnLCB7cGFyYW1zOiB0aGlzLmNoZWNrQWJsZUlkfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEudG90YWwpDQogICAgICAgIGxldCBzZXNzaW9ucyA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50b3RhbCA9PT0gMCkgew0KICAgICAgICAgIHRoaXMuZGVsZXRlTW92aWVCeUlkKGlkKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTliY3liKTmlq3mnInmnKrlrozmiJBzZXNzaW9uJykNCiAgICAgICAgICBsZXQgc2Vzc2lvbklkcyA9ICcnDQogICAgICAgICAgZm9yIChsZXQgdGVtcCBvZiBzZXNzaW9ucykgew0KICAgICAgICAgICAgY29uc29sZS5sb2codGVtcCkNCiAgICAgICAgICAgIHNlc3Npb25JZHMgKz0gdGVtcC5zZXNzaW9uSWQrJyAnDQogICAgICAgICAgfQ0KICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXNzaW9uSWRzIGlzIDogJytzZXNzaW9uSWRzKQ0KICAgICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHmnInmnKrlrozmiJDmtLvliqjlnLrmrKHvvIzkuI3og73liKDpmaTmtLvliqjkv6Hmga/jgIJcbicrJ+WvvOiHtOW8guW4uOeahOWcuuasoee8luWPt+S4ujogJytzZXNzaW9uSWRzLCAn5Yig6Zmk6K+35rGC5byC5bi46YCa55+lJywgew0KICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLA0KICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbW92aWUnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDljZXkuKrliKDpmaTmtLvliqgNCiAgICBhc3luYyBkZWxldGVNb3ZpZUJ5SWQoaWQpIHsNCiAgICAgIGxldCBkZWxldGVJbmZvID0gaWQNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgLy/or6Lpl67nlKjmiLfmmK/lkKbnoa7orqTliKDpmaQNCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpDQoNCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIg0KICAgICAgLy8g55So5oi35Y+W5raI5Yig6Zmk77yMcmVzcOS4uuWtl+espuS4siJjYW5jZWwiDQogICAgICBjb25zb2xlLmxvZyhyZXNwKQ0KICAgICAgaWYgKHJlc3AgPT09ICdjYW5jZWwnKSB7DQogICAgICAgIHJldHVybiBfdGhpcy4kbWVzc2FnZS5pbmZvKCflt7Llj5bmtojliKDpmaQnKQ0KICAgICAgfQ0KDQogICAgICBjb25zb2xlLmxvZyhkZWxldGVJbmZvKQ0KICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCdzeXNNb3ZpZS8nICsgZGVsZXRlSW5mbywgSlNPTi5zdHJpbmdpZnkoZGVsZXRlSW5mbykpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSAhPT0gMjAwKSB7DQogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5rS75Yqo5L+h5oGv5aSx6LSl77yBJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuZ2V0TW92aWVMaXN0KCkNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5rS75Yqo5L+h5oGv5oiQ5Yqf77yBJykNCiAgICB9LA0KICAgIGFzeW5jIGRlbGV0ZUNhdGVnb3J5KGNhdGVnb3J5SWQpew0KICAgICAgY29uc29sZS5sb2coJ+exu+Wei2lkJykNCiAgICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5SWQpDQogICAgICBjb25zdCBfdGhpcyA9IHRoaXMNCiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgnc3lzTW92aWVUb0NhdGVnb3J5LycrdGhpcy5tb3ZpZUlkKycvJytjYXRlZ29yeUlkKS50aGVuKHJlc3A9PnsNCiAgICAgICAgY29uc29sZS5sb2cocmVzcCkNCiAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk57G75Z6L5oiQ5YqfJykNCiAgICAgIH0pDQogICAgICBhd2FpdCBheGlvcy5nZXQoJ3N5c01vdmllL2ZpbmQvJyt0aGlzLm1vdmllSWQpLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgX3RoaXMuZWRpdENhdGVnb3J5Rm9ybSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5tb3ZpZUNhdGVnb3J5TGlzdA0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUV4Y2VlZCgpew0KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5rS75Yqo5bCB6Z2i5LiN6IO96LaF6L+H5LiA5bygIScpDQogICAgfSwNCiAgICBhc3luYyBhZGRDYXRlZ29yeSgpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBhd2FpdCBheGlvcy5wb3N0KCdzeXNNb3ZpZVRvQ2F0ZWdvcnkvJyt0aGlzLm1vdmllSWQrJy8nK3RoaXMuc2VsZWN0ZWRNb3ZpZUNhdGVnb3J5KS50aGVuKHJlc3A9PnsNCiAgICAgICAgY29uc29sZS5sb2cocmVzcCkNCiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PTIwMCkgcmV0dXJuIHRoaXMuJGFsZXJ0KCfmt7vliqDmtLvliqjnsbvliKvlpLHotKUnLCAn5re75Yqg5rS75Yqo57G75Yir5byC5bi46YCa55+lJywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5oiR55+l6YGT5LqGJw0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOa0u+WKqOexu+WIq+aIkOWKnyIpDQogICAgICB9KQ0KICAgICAgYXhpb3MuZ2V0KCdzeXNNb3ZpZS9maW5kLycrdGhpcy5tb3ZpZUlkKS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgIF90aGlzLmVkaXRDYXRlZ29yeUZvcm0gPSByZXNwb25zZS5kYXRhLmRhdGEubW92aWVDYXRlZ29yeUxpc3QNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["MovieInfo.vue"],"names":[],"mappings":";AAmTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieInfo.vue","sourceRoot":"src/views/movie","sourcesContent":["<template>\r\n  <div>\r\n    <!--面包屑导航区-->\r\n    <div class=\"board\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>活动管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>活动信息</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n    <el-card class=\"box-card\">\r\n      <el-row :addDialogVisible=\"20\">\r\n        <el-col :span=\"5\">\r\n          <el-input v-model=\"inputMovieName\" placeholder=\"请输入活动名称\" clearable></el-input>\r\n        </el-col>\r\n        <el-col :span=\"5\">\r\n<!--          <el-select class=\"el-select-search\" v-model=\"selectedMovieArea\" placeholder=\"请选择活动地区\" clearable>-->\r\n<!--            <el-option-->\r\n<!--                v-for=\"item in movieAreaList\"-->\r\n<!--                :key=\"item\"-->\r\n<!--                :label=\"item\"-->\r\n<!--                :value=\"item\">-->\r\n<!--            </el-option>-->\r\n<!--          </el-select>-->\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button class=\"el-button-search\" icon=\"el-icon-search\" @click=\"getMovieList\">搜索</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" class=\"row2\">\r\n        <el-col :span=\"10\">\r\n            <el-date-picker\r\n                    :unlink-panels=\"true\"\r\n                    v-model=\"selectedDate\"\r\n                    type=\"datetimerange\"\r\n                    range-separator=\"至\"\r\n                    start-placeholder=\"开始日期\"\r\n                    end-placeholder=\"结束日期\">\r\n            </el-date-picker>\r\n        </el-col>\r\n\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加活动</el-button>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"danger\" @click=\"isAbleMultipleDelete\">批量删除</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n<!--    活动信息列表-->\r\n    <el-table :data=\"movieList\" style=\"width: 100%\" border stripe @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"movieId\" label=\"#\" width=\"40\"></el-table-column>\r\n      <el-table-column prop=\"movieName\" label=\"活动名称\"></el-table-column>\r\n<!--      <el-table-column prop=\"movieArea\" label=\"活动区域\"></el-table-column>-->\r\n      <el-table-column prop=\"movieLength\" label=\"活动时长（分钟）\"></el-table-column>\r\n      <el-table-column prop=\"releaseDate\" label=\"活动开始时间\"></el-table-column>\r\n      <el-table-column prop=\"movieBoxOffice\" label=\"热度\"></el-table-column>\r\n<!--      操作按钮-->\r\n      <el-table-column label=\"操作\" width=\"240\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tooltip effect=\"dark\" content=\"查看活动信息详细\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n            <el-button type=\"success\" icon=\"el-icon-view\" size=\"mini\" @click=\"toMovieInfo(scope.row.movieId)\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"dark\" content=\"修改活动信息\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"isAbleEdit(scope.row.movieId)\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"dark\" content=\"删除活动\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"isAbleDelete(scope.row.movieId)\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"dark\" content=\"活动类别管理\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n            <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"showEditCategoryDialog(scope.row.movieId)\"></el-button>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页区域-->\r\n    <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pageNum\"\r\n        :page-sizes=\"[5, 7, 9]\"\r\n        :page-size=\"queryInfo.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n    </el-pagination>\r\n    </el-card>\r\n\r\n    <!--添加活动对话框-->\r\n    <el-dialog title=\"添加活动\" :visible.sync=\"addDialogVisible\" width=\"60%\" @close=\"addDialogClosed\">\r\n      <!--内容主题区-->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"100px\">\r\n        <!--prop：在addFormRules中定义校验规则， v-model：双向绑定数据-->\r\n        <el-form-item label=\"活动名称\" prop=\"movieName\">\r\n          <el-input v-model=\"addForm.movieName\"></el-input>\r\n        </el-form-item>\r\n<!--        <el-form-item label=\"活动区域\" prop=\"movieArea\">-->\r\n<!--          <el-select v-model=\"addForm.movieArea\" placeholder=\"请选择活动区域\" clearable >-->\r\n<!--            <el-option-->\r\n<!--                    v-for=\"item in movieAreaList\"-->\r\n<!--                    :key=\"item\"-->\r\n<!--                    :label=\"item\"-->\r\n<!--                    :value=\"item\">-->\r\n<!--            </el-option>-->\r\n<!--          </el-select>-->\r\n<!--        </el-form-item>-->\r\n        <el-form-item label=\"时长(分钟)\" prop=\"movieLength\">\r\n          <el-input v-model=\"addForm.movieLength\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动开始时间\" prop=\"releaseDate\">\r\n          <el-date-picker\r\n              v-model=\"addForm.releaseDate\"\r\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              type=\"datetime\"\r\n              placeholder=\"选择日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动简介\" prop=\"movieIntroduction\">\r\n          <el-input v-model=\"addForm.movieIntroduction\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动封面\">\r\n          <el-upload action=\"\" list-type=\"picture-card\"\r\n                     :auto-upload=\"false\" :limit=\"1\"\r\n                     :file-list=\"poster\" :on-exceed=\"handleExceed\"\r\n                     :on-change=\"handleChangeP\"\r\n                     :on-success=\"handleSuccessP\"\r\n                     :on-error=\"handleError\" ref=\"posterRef\"\r\n                     :http-request=\"submitFileP\">\r\n            <i slot=\"default\" class=\"el-icon-plus\" ></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreviewP(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemoveP(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n        <!--        修改图集-->\r\n        <el-form-item label=\"活动图集\">\r\n          <el-upload action=\"\" list-type=\"picture-card\" :auto-upload=\"false\"\r\n                     :file-list=\"pics\" :on-change=\"handleChange\"\r\n                     :on-success=\"handleSuccess\" :on-error=\"handleError\"\r\n                     ref=\"pictureRef\" :http-request=\"submitFile\">\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!--底部区域-->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"addMovie\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n\r\n    <!-- 修改活动信息对话框 -->\r\n    <el-dialog title=\"修改活动信息\" :visible.sync=\"editDialogVisible\" width=\"60%\" @close=\"editDialogClosed\">\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"活动名称\" prop=\"movieName\">\r\n          <el-input v-model=\"editForm.movieName\" disabled></el-input>\r\n        </el-form-item>\r\n\r\n<!--        <el-form-item label=\"活动要求\" prop=\"movieArea\">-->\r\n<!--          <el-select v-model=\"editForm.movieArea\" placeholder=\"请选择活动区域\" clearable >-->\r\n<!--            <el-option-->\r\n<!--              v-for=\"item in movieAreaList\"-->\r\n<!--              :key=\"item\"-->\r\n<!--              :label=\"item\"-->\r\n<!--              :value=\"item\">-->\r\n<!--            </el-option>-->\r\n<!--          </el-select>-->\r\n<!--        </el-form-item>-->\r\n        <el-form-item label=\"活动时长/分钟\" prop=\"movieLength\">\r\n          <el-input v-model=\"editForm.movieLength\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"开始时间\" prop=\"releaseDate\">\r\n          <el-date-picker\r\n              v-model=\"editForm.releaseDate\"\r\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              type=\"datetime\"\r\n              placeholder=\"选择日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动简介\" prop=\"movieIntroduction\">\r\n          <el-input v-model=\"editForm.movieIntroduction\"></el-input>\r\n        </el-form-item>\r\n<!--        修改封面-->\r\n        <el-form-item label=\"活动封面\">\r\n          <el-upload action=\"\" list-type=\"picture-card\"\r\n                     :auto-upload=\"false\" :limit=\"1\"\r\n                     :file-list=\"poster\" :on-exceed=\"handleExceed\"\r\n                     :on-change=\"handleChangeP\"\r\n                     :on-success=\"handleSuccessP\"\r\n                     :on-error=\"handleError\" ref=\"posterEditRef\"\r\n                     :http-request=\"submitFileP\">\r\n            <i slot=\"default\" class=\"el-icon-plus\" ></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreviewP(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemoveP(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n<!--        修改图集-->\r\n        <el-form-item label=\"活动图集\">\r\n          <el-upload action=\"\" list-type=\"picture-card\" :auto-upload=\"false\"\r\n                     :file-list=\"pics\" :on-change=\"handleChange\"\r\n                     :on-success=\"handleSuccess\"\r\n                     :on-error=\"handleError\" ref=\"pictureEditRef\"\r\n                     :http-request=\"submitFile\">\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editMovieInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n<!--    活动类型管理界面-->\r\n    <el-dialog title=\"活动类型管理\" :visible.sync=\"editCategoryVisible\" width=\"60%\" @close=\"editCategoryDialogClosed\">\r\n<!--      <template>-->\r\n<!--        <el-checkbox-group-->\r\n<!--            v-model=\"selectedMovieCategory\">-->\r\n<!--          <el-checkbox v-for=\"category in movieCategoryList\" :label=\"category.movieCategoryName\" :key=\"category.movieCategoryId\">{{category.movieCategoryName}}</el-checkbox>-->\r\n<!--        </el-checkbox-group>-->\r\n<!--      </template>-->\r\n      <el-form label-width=\"100px\">\r\n        <el-form-item label=\"活动类型\" prop=\"movieActor\">\r\n          <el-select v-model=\"selectedMovieCategory\" placeholder=\"请选择类型名称\" clearable>\r\n            <el-option\r\n                v-for=\"item in categoryList\"\r\n                :key=\"item.movieCategoryId\"\r\n                :label=\"item.movieCategoryName\"\r\n                :value=\"item.movieCategoryId\"\r\n                v-if=\"ifShow(item.movieCategoryId)\">\r\n            </el-option>\r\n          </el-select>\r\n        <el-button type=\"primary\" @click=\"addCategory()\">添加</el-button>\r\n        </el-form-item>\r\n        <el-form-item>\r\n              <el-tag\r\n                  v-for=\"tag in editCategoryForm\"\r\n                  :key=\"tag.movieCategoryName\"\r\n                  closable\r\n                  @close=\"deleteCategory(tag.movieCategoryId)\">\r\n                {{tag.movieCategoryName}}\r\n              </el-tag>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"MovieInfo\",\r\n  data() {\r\n    return {\r\n      queryInfo: {\r\n        movieId: '',\r\n        movieArea: '中国大陆',\r\n        movieName: '',\r\n        startDate: '',\r\n        endDate: '',\r\n        pageNum: 1,\r\n        pageSize: 7\r\n      },\r\n      total: 0,\r\n      url: 'http://localhost:8181/',\r\n      //控制对话框的显示与隐藏\r\n      addDialogVisible: false,\r\n      selectedMovieCategory:[],\r\n      selectedMovieArea: '中国大陆',\r\n      selectedDate: [],\r\n      inputMovieName: '',\r\n      categoryList:[],\r\n      movieList: [],\r\n      movieAreaList: [\"中国大陆\", \"美国\", \"韩国\", \"日本\", \"中国香港\", \"中国台湾\", \"泰国\", \"印度\",\r\n        \"法国\", \"英国\", \"俄罗斯\", \"意大利\", \"西班牙\", \"德国\", \"波兰\", \"澳大利亚\", \"伊朗\", \"其他\"],\r\n      editForm: {},\r\n      checkAbleId: {},\r\n      editCategoryForm:[],\r\n      movieId:'',\r\n      editDialogVisible: false,\r\n      editCategoryVisible: false,\r\n      multipleSelection: [],\r\n      dialogVisible: false,\r\n      dialogImageUrl: '',\r\n      disabled:false,\r\n      //活动封面增删变量\r\n      poster: [],\r\n      //发送给后端的JSON图片\r\n      posterL: [],\r\n      deletePostList:[],\r\n      //添加删除图片集 动态绑定图片列表\r\n      pics: [],\r\n      // 发送给后端的JSON图片数组\r\n      pictureList: [],\r\n      picNums:0,\r\n      deletePicList:[],\r\n      //添加活动表单数据\r\n      addForm: {\r\n        movieId: '',\r\n        movieName: '',\r\n        movieArea: '中国大陆',\r\n        movieLength: 0,\r\n        releaseDate: '',\r\n        movieBoxOffice: '',\r\n        movieIntroduction: '',\r\n        moviePictures: '',\r\n        moviePoster:''\r\n      },\r\n      //添加验证表单规则对象\r\n      addFormRules: {\r\n        movieName: [\r\n          {required: true, message: '请输入活动名称', trigger: 'blur'}\r\n        ],\r\n        movieArea: [\r\n          {required: true, message: '请选择活动区域', trigger: 'blur'}\r\n        ]\r\n      },\r\n      //修改验证表单规则对象\r\n      editFormRules: {\r\n        movieName: [\r\n          {required: true, message: '请输入活动名称', trigger: 'blur'}\r\n        ],\r\n        movieArea: [\r\n          {required: true, message: '请选择活动区域', trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getMovieList()\r\n    this.getCategoryList()\r\n  },\r\n  methods: {\r\n    getMovieList() {\r\n      this.queryInfo.movieName = this.inputMovieName\r\n      this.queryInfo.movieArea = this.selectedMovieArea\r\n      if (!this.selectedDate) {\r\n        this.queryInfo.startDate = this.selectedDate[0]\r\n        this.queryInfo.endDate = this.selectedDate[1]\r\n      }\r\n      const _this = this;\r\n      axios.get('sysMovie/find', {params: _this.queryInfo}).then(resp => {\r\n        console.log(resp)\r\n        _this.movieList = resp.data.data;\r\n        _this.total = resp.data.total;\r\n        _this.queryInfo.pageSize = resp.data.pageSize;\r\n        _this.queryInfo.pageNum = resp.data.pageNum;\r\n      })\r\n    },\r\n    getCategoryList() {\r\n      const _this = this\r\n      axios.get('sysMovieCategory/find').then(resp=>{\r\n        _this.categoryList = resp.data.data;\r\n        console.log(_this.categoryList)\r\n      })\r\n    },\r\n    ifShow(id) {\r\n      let l = true\r\n      for (let i = 0; i < this.editCategoryForm.length; i++) {\r\n        if (id === this.editCategoryForm[i].movieCategoryId) {\r\n          l =false\r\n        }\r\n      }\r\n      return l\r\n    },\r\n    handleSizeChange(newSize) {\r\n      this.queryInfo.pageSize = newSize\r\n      this.getMovieList()\r\n      console.log(newSize)\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pageNum = newPage\r\n      this.getMovieList()\r\n      console.log(newPage)\r\n    },\r\n    async submitFile() {\r\n      const _this = this\r\n      for (let i = 0; i < this.pics.length; i++) {\r\n        let formData = new FormData()\r\n        if (this.pics[i].status === 'success') {\r\n          let s = this.pics[i].url\r\n          this.pictureList.push(s.substring(s.indexOf('/images')))\r\n          continue\r\n        }\r\n        let file = this.pics[i].raw\r\n        formData.append('file', file)\r\n        await axios.post('upload/movie', formData).then(response => {\r\n          _this.pictureList.push(response.data.data)\r\n        })\r\n      }\r\n    },\r\n    async submitFileP() {\r\n      const _this = this\r\n      for (let i = 0; i < this.poster.length; i++) {\r\n        let formData = new FormData()\r\n        if (this.poster[i].status === 'success') {\r\n          let s = this.poster[i].url\r\n          this.posterL.push(s.substring(s.indexOf('/images')))\r\n          continue\r\n        }\r\n        let file = this.poster[i].raw\r\n        formData.append('file', file)\r\n        await axios.post('upload/movie', formData).then(response => {\r\n          _this.posterL.push(response.data.data)\r\n        })\r\n      }\r\n    },\r\n    // 监听添加对话框的关闭事件\r\n    addDialogClosed() {\r\n      this.$refs.addFormRef.resetFields()\r\n      this.$refs.pictureRef.clearFiles()\r\n      this.$refs.posterRef.clearFiles()\r\n      this.poster = []\r\n      this.posterL=[]\r\n      this.pics = []\r\n      this.pictureList = []\r\n    },\r\n    // 监听添加按钮\r\n    async addMovie() {\r\n      await this.submitFile()\r\n      await this.submitFileP()\r\n      this.addForm.moviePictures = JSON.stringify(this.pictureList)\r\n      this.addForm.moviePoster = JSON.stringify(this.posterL)\r\n      const _this = this\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        console.log(valid)\r\n        if (!valid) return\r\n        //预校验成功，发网络请求\r\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\r\n        await axios.post('sysMovie', JSON.stringify(_this.addForm)).then(resp => {\r\n          console.log(resp)\r\n          if (resp.data.code !== 200) {\r\n            this.$message.error('添加活动信息失败！')\r\n          }\r\n        })\r\n        //隐藏添加对话框\r\n        this.addDialogVisible = false\r\n        //重新加载列表\r\n        this.getMovieList()\r\n        this.$message.success('添加活动信息成功！')\r\n      })\r\n    },\r\n    // 监听修改对话框的关闭事件\r\n    editDialogClosed() {\r\n      this.$refs.editFormRef.resetFields()\r\n      this.$refs.pictureEditRef.clearFiles()\r\n      this.$refs.posterEditRef.clearFiles()\r\n      this.pics = []\r\n      this.pictureList = []\r\n      this.posterL = []\r\n      this.poster = []\r\n    },\r\n    //监听修改类别对话框的关闭事件\r\n    editCategoryDialogClosed(){\r\n      this.selectedMovieCategory = ''\r\n    },\r\n    // 修改活动信息对话框\r\n    async editMovieInfo() {\r\n      await this.submitFile()\r\n      this.editForm.moviePictures = JSON.stringify(this.pictureList)\r\n      await this.submitFileP()\r\n      this.editForm.moviePoster = JSON.stringify(this.posterL)\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        const _this = this\r\n        if (!valid) return\r\n        let success = true\r\n        axios.defaults.headers.put['Content-Type'] = 'application/json'\r\n        await axios.put('sysMovie', JSON.stringify(_this.editForm)).then(resp => {\r\n          if (resp.data.code !== 200) {\r\n            this.$message.error('修改活动信息失败！')\r\n            success = false\r\n          }\r\n        })\r\n        if (!success) return\r\n        for(let s of this.deletePicList){\r\n          await axios.get('/upload/delete?filePath=' + s.substring(s.indexOf('/images')))\r\n        }\r\n        for(let s of this.deletePostList){\r\n          await axios.get('/upload/delete?filePath=' + s.substring(s.indexOf('/images')))\r\n        }\r\n        this.editDialogVisible = false\r\n        this.getMovieList()\r\n        this.$message.success('修改活动信息成功！')\r\n      })\r\n    },\r\n    handleChange(file, filelist) {\r\n      this.pics = filelist.slice(0)\r\n      console.log(this.pics)\r\n    },\r\n    handleChangeP(file, filelist) {\r\n      this.poster = filelist\r\n      console.log(this.poster)\r\n    },\r\n    handleSuccess(response) {\r\n      this.pictureList.push(response.data)\r\n      this.addForm = JSON.stringify(this.pictureList)\r\n      this.editForm = JSON.stringify(this.pictureList)\r\n    },\r\n    handleSuccessP(response) {\r\n      this.posterL.push(response.data)\r\n      this.addForm = JSON.stringify(this.posterL)\r\n      this.editForm = JSON.stringify(this.posterL)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handlePictureCardPreviewP(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleRemove(file,filelist) {\r\n      const filePath = file.url\r\n      console.log(filePath)\r\n      const idx = this.pics.findIndex(x => x.url === filePath)\r\n      if(file.status === 'success'){\r\n        this.deletePicList.push(file.url)\r\n      }\r\n      this.pics.splice(idx, 1)\r\n    },\r\n    handleRemoveP(file) {\r\n      const filePath = file.url\r\n      console.log(filePath)\r\n      const idx = this.poster.findIndex(x=> x.url === filePath)\r\n      if(file.status === 'success'){\r\n        this.deletePostList.push(file.url)\r\n      }\r\n      this.poster.splice(idx,1)\r\n    },\r\n    handleError(err) {\r\n      console.log(err)\r\n    },\r\n    toMovieInfo(id) {\r\n      window.open('http://localhost:8081/movieInfo/' + id)\r\n    },\r\n    isAbleEdit(id) {\r\n      this.checkAbleId.movieId = id\r\n      axios.get('sysSession/isAbleEdit', {params: this.checkAbleId}).then(response => {\r\n        console.log(response.data.total)\r\n        let sessions = response.data.data\r\n        if (response.data.total === 0) {\r\n          console.log('空的可改')\r\n          this.showEditDialog(id)\r\n        } else {\r\n          console.log('修改前判断有未完成session')\r\n          let sessionIds = ''\r\n          for (let temp of sessions) {\r\n            console.log(temp)\r\n            sessionIds += temp.sessionId+' '\r\n          }\r\n          console.log('sessionIds is : '+sessionIds)\r\n          this.$alert('抱歉！有未完成活动场次，不能修改活动信息。\\n'+'导致异常的场次编号为: '+sessionIds, '修改请求异常通知', {\r\n            confirmButtonText: '我知道了',\r\n            callback: action => {\r\n              this.$router.push('/movie')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 显示修改对话框，回显数据\r\n    async showEditDialog(id) {\r\n      const _this = this\r\n      await axios.get('sysMovie/find/' + id).then(resp => {\r\n        console.log(resp)\r\n        _this.editForm = resp.data.data\r\n      })\r\n      for (const item of JSON.parse(this.editForm.moviePictures)) {\r\n        let pic = {}\r\n        pic['name'] = ''\r\n        pic['url'] = this.global.base + item\r\n        this.pics.push(pic)\r\n      }\r\n      for (const item of JSON.parse(this.editForm.moviePoster)) {\r\n        let pic = {}\r\n        pic['name'] = ''\r\n        pic['url'] = this.global.base + item\r\n        this.poster.push(pic)\r\n      }\r\n      this.editDialogVisible = true\r\n    },\r\n    //显示修改类别对话框,回显数据\r\n    async showEditCategoryDialog(id){\r\n      const _this = this\r\n      _this.movieId = id\r\n      await axios.get('sysMovie/find/'+id).then(response=>{\r\n        _this.editCategoryForm = response.data.data.movieCategoryList\r\n        })\r\n      this.editCategoryVisible = true\r\n    },\r\n    //取消修改\r\n    cancelEdit(){\r\n      this.editDialogVisible = false\r\n      this.deletePicList.splice(0,this.deletePicList.length)\r\n      this.deletePostList.splice(0,this.deletePostList.length)\r\n    },\r\n    // 监听多选框变化\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val\r\n    },\r\n    // 批量删除前校验\r\n    async isAbleMultipleDelete() {\r\n      let ableDelete = true\r\n      let ids = ''\r\n      for (let i = 0; i < this.multipleSelection.length; i++) {\r\n        this.checkAbleId.movieId = this.multipleSelection[i].movieId\r\n        const { data : res } = await axios.get('sysSession/isAbleEdit', {params: this.checkAbleId})\r\n        if (res.data.length !== 0) {\r\n          ids += this.multipleSelection[i].movieId + ' '\r\n          ableDelete = false\r\n        }\r\n      }\r\n      if (ableDelete === false) {\r\n        this.$alert('抱歉！有未完成活动场次，不能批量删除活动信息。\\n' + '导致异常的活动编号为: ' + ids, '批量删除请求异常通知', {\r\n          confirmButtonText: '我知道了',\r\n          callback: action => {\r\n            this.$router.push('/movie')\r\n          }\r\n        })\r\n        return\r\n      }\r\n      await this.multipleDelete()\r\n    },\r\n    // 批量删除活动\r\n    async multipleDelete() {\r\n      const _this = this\r\n      //询问用户是否确认删除\r\n      const resp = await this.$confirm('此操作将永久删除这些条目, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 用户确认删除, resp为字符串\"confirm\"\r\n      // 用户取消删除，resp为字符串\"cancel\"\r\n      if (resp === 'cancel') {\r\n        return _this.$message.info('已取消删除')\r\n      }\r\n\r\n      let ids = []\r\n      this.multipleSelection.forEach(data => {\r\n        let item = data.movieId\r\n        ids.push(item)\r\n      })\r\n      console.log(ids)\r\n      axios.defaults.headers.post['Content-Type'] = 'application/json'\r\n      await axios.delete('sysMovie/' + ids, JSON.stringify(ids)).then(resp => {\r\n        console.log(123)\r\n        if (resp.data.code !== 200) {\r\n          this.$message.success('批量删除活动失败！')\r\n        }\r\n      })\r\n      this.getMovieList()\r\n      this.$message.success('批量删除活动成功！')\r\n    },\r\n    async isAbleDelete(id) {\r\n      this.checkAbleId.movieId = id\r\n      await axios.get('sysSession/isAbleEdit', {params: this.checkAbleId}).then(response => {\r\n        console.log(response.data.total)\r\n        let sessions = response.data.data\r\n        if (response.data.total === 0) {\r\n          this.deleteMovieById(id)\r\n        } else {\r\n          console.log('删除前判断有未完成session')\r\n          let sessionIds = ''\r\n          for (let temp of sessions) {\r\n            console.log(temp)\r\n            sessionIds += temp.sessionId+' '\r\n          }\r\n          console.log('sessionIds is : '+sessionIds)\r\n          this.$alert('抱歉！有未完成活动场次，不能删除活动信息。\\n'+'导致异常的场次编号为: '+sessionIds, '删除请求异常通知', {\r\n            confirmButtonText: '我知道了',\r\n            callback: action => {\r\n              this.$router.push('/movie')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 单个删除活动\r\n    async deleteMovieById(id) {\r\n      let deleteInfo = id\r\n      const _this = this\r\n      //询问用户是否确认删除\r\n      const resp = await this.$confirm('此操作将永久删除该条目, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 用户确认删除, resp为字符串\"confirm\"\r\n      // 用户取消删除，resp为字符串\"cancel\"\r\n      console.log(resp)\r\n      if (resp === 'cancel') {\r\n        return _this.$message.info('已取消删除')\r\n      }\r\n\r\n      console.log(deleteInfo)\r\n      axios.defaults.headers.post['Content-Type'] = 'application/json'\r\n      await axios.delete('sysMovie/' + deleteInfo, JSON.stringify(deleteInfo)).then(resp => {\r\n        if (resp.data.code !== 200) {\r\n          _this.$message.success('删除活动信息失败！')\r\n        }\r\n      })\r\n      this.getMovieList()\r\n      this.$message.success('删除活动信息成功！')\r\n    },\r\n    async deleteCategory(categoryId){\r\n      console.log('类型id')\r\n      console.log(categoryId)\r\n      const _this = this\r\n      await axios.delete('sysMovieToCategory/'+this.movieId+'/'+categoryId).then(resp=>{\r\n        console.log(resp)\r\n        _this.$message.success('删除类型成功')\r\n      })\r\n      await axios.get('sysMovie/find/'+this.movieId).then(response=>{\r\n        _this.editCategoryForm = response.data.data.movieCategoryList\r\n      })\r\n    },\r\n    handleExceed(){\r\n      this.$message.error('活动封面不能超过一张!')\r\n    },\r\n    async addCategory(){\r\n      const _this = this\r\n      await axios.post('sysMovieToCategory/'+this.movieId+'/'+this.selectedMovieCategory).then(resp=>{\r\n        console.log(resp)\r\n        if (resp.data.code !==200) return this.$alert('添加活动类别失败', '添加活动类别异常通知', {\r\n          confirmButtonText: '我知道了'\r\n        })\r\n        this.$message.success(\"添加活动类别成功\")\r\n      })\r\n      axios.get('sysMovie/find/'+this.movieId).then(response=>{\r\n        _this.editCategoryForm = response.data.data.movieCategoryList\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.row2{\r\n  margin-top: 20px;\r\n}\r\n.el-tag{\r\n    margin: 0 10px 10px 0;\r\n}\r\n.el-button-search{\r\n  margin: 0px 0px 0px 10px;\r\n}\r\n.el-select-search{\r\n  margin: 0 0px 0px 20px;\r\n}\r\n</style>\r\n"]}]}