{"remainingRequest":"F:\\Code\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Code\\CinemaBookingSystem\\panda-ui\\src\\views\\user\\UserInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Code\\CinemaBookingSystem\\panda-ui\\src\\views\\user\\UserInfo.vue","mtime":1714207564417},{"path":"F:\\Code\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714209991146},{"path":"F:\\Code\\CinemaBookingSystem\\panda-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1714209992890},{"path":"F:\\Code\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714209991146},{"path":"F:\\Code\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1714209993504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgZ2xvYmFsIGZyb20gIi4uLy4uL2Fzc2V0cy9jc3MvZ2xvYmFsLmNzcyINCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICBsZXQgY2hlY2tFbWFpbCA9IChydWxlLCB2YWx1ZSwgY2IpID0+IHsNCiAgICAgIGNvbnN0IHJlZ0VtYWlsID0gL14oW2EtekEtWjAtOV8tXSkrQChbYS16QS1aMC05Xy1dKSsoXC5bYS16QS1aMC05Xy1dKSsvDQogICAgICBpZiAocmVnRW1haWwudGVzdCh2YWx1ZSkpew0KICAgICAgICByZXR1cm4gY2IoKQ0KICAgICAgfQ0KICAgICAgY2IobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTpgq7nrrEnKSkNCiAgICB9DQogICAgbGV0IGNoZWNrTW9iaWxlID0gKHJ1bGUsIHZhbHVlLCBjYikgPT4gew0KICAgICAgY29uc3QgcmVnTW9iaWxlID0gL14oMHw4NnwxNzk1MSk/KDEzWzAtOV18MTVbMDEyMzQ1Njc4OV18MTdbNjc4XXwxOFswLTldfDE0WzU3XSlbMC05XXs4fSQvDQogICAgICBpZiAocmVnTW9iaWxlLnRlc3QodmFsdWUpKXsNCiAgICAgICAgcmV0dXJuIGNiKCkNCiAgICAgIH0NCiAgICAgIGNiKG5ldyBFcnJvcign6K+36L6T5YWl5ZCI5rOV55qE5omL5py65Y+356CBJykpDQogICAgfQ0KICAgIHJldHVybiB7DQogICAgICBxdWVyeUluZm86IHsNCiAgICAgICAgdXNlck5hbWU6ICcnLA0KICAgICAgICBwaG9uZU51bWJlcjogJycsDQogICAgICAgIGVtYWlsOiAnJywNCiAgICAgICAgc2V4OiAnJywNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDcNCiAgICAgIH0sDQogICAgICB0b3RhbDogMCwNCiAgICAgIC8v5o6n5Yi25a+56K+d5qGG55qE5pi+56S65LiO6ZqQ6JePDQogICAgICBhZGREaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIC8v5re75Yqg5b2x6Zmi55qE6KGo5Y2V5pWw5o2uDQogICAgICBhZGRGb3JtOiB7DQogICAgICAgIHVzZXJJZDogJycsDQogICAgICAgIHVzZXJOYW1lOiAnJywNCiAgICAgICAgcGFzc3dvcmQ6ICcnLA0KICAgICAgICBlbWFpbDogJycsDQogICAgICAgIHBob25lTnVtYmVyOiAnJywNCiAgICAgICAgc2V4OiAnJywNCiAgICAgICAgdXNlclBpY3R1cmU6ICcnDQogICAgICB9LA0KICAgICAgLy/pqozor4HooajljZXop4TliJnlr7nosaENCiAgICAgIGFkZEZvcm1SdWxlczogew0KICAgICAgICB1c2VyTmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBwYXNzd29yZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBlbWFpbDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlLXlrZDpgq7nrrEnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tFbWFpbCwgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBwaG9uZU51bWJlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmiYvmnLrlj7fnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tNb2JpbGUsIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgc2V4OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaAp+WIqycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGVkaXRGb3JtOiB7fSwNCiAgICAgIGVkaXRGb3JtUnVsZXM6IHsNCiAgICAgICAgdXNlck5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgcGFzc3dvcmQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgZW1haWw6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55S15a2Q6YKu566xJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrRW1haWwsIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgcGhvbmVOdW1iZXI6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5omL5py65Y+356CBJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrTW9iaWxlLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHNleDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmgKfliKsnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBpbnB1dFVzZXJOYW1lOiAnJywNCiAgICAgIGlucHV0RW1haWw6ICcnLA0KICAgICAgaW5wdXRQaG9uZU51bWJlcjogJycsDQogICAgICBzZWxlY3RlZFNleDogJycsDQogICAgICB1c2VyTGlzdDogW10sDQogICAgICBnZW5kZXI6IFsNCiAgICAgICAgew0KICAgICAgICAgIGlkOiBmYWxzZSwNCiAgICAgICAgICBuYW1lOiAn5aWzJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgaWQ6IHRydWUsDQogICAgICAgICAgbmFtZTogJ+eUtycNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgLy/mt7vliqDliKDpmaTlm77niYcg5Yqo5oCB57uR5a6a5Zu+54mH5YiX6KGoDQogICAgICBwaWNzOiBbXSwNCiAgICAgIC8vIOWPkemAgee7meWQjuerr+eahEpTT07lm77niYfmlbDnu4QNCiAgICAgIHBpY3R1cmVMaXN0OiBbXSwNCiAgICAgIHBpY051bXM6IDAsDQogICAgICBkZWxldGVQaWNMaXN0OiBbXSwNCiAgICAgIHJvbGVMaXN0OiBbXQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFVzZXJMaXN0KCkNCiAgICB0aGlzLmdldFJvbGVMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFVzZXJMaXN0KCkgew0KICAgICAgdGhpcy5xdWVyeUluZm8udXNlck5hbWUgPSB0aGlzLmlucHV0VXNlck5hbWUNCiAgICAgIHRoaXMucXVlcnlJbmZvLmVtYWlsID0gdGhpcy5pbnB1dEVtYWlsDQogICAgICB0aGlzLnF1ZXJ5SW5mby5waG9uZU51bWJlciA9IHRoaXMuaW5wdXRQaG9uZU51bWJlcg0KICAgICAgdGhpcy5xdWVyeUluZm8uc2V4ID0gdGhpcy5zZWxlY3RlZFNleA0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgYXhpb3MuZ2V0KCdzeXNVc2VyJywge3BhcmFtczogX3RoaXMucXVlcnlJbmZvfSkudGhlbihyZXNwID0+IHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzcCkNCiAgICAgICAgX3RoaXMudXNlckxpc3QgPSByZXNwLmRhdGEuZGF0YTsNCiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWw7DQogICAgICAgIF90aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IHJlc3AuZGF0YS5wYWdlU2l6ZTsNCiAgICAgICAgX3RoaXMucXVlcnlJbmZvLnBhZ2VOdW0gPSByZXNwLmRhdGEucGFnZU51bTsNCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRSb2xlTGlzdCgpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBheGlvcy5nZXQoJ3N5c1JvbGUnKS50aGVuKHJlc3AgPT4gew0KICAgICAgICBfdGhpcy5yb2xlTGlzdCA9IHJlc3AuZGF0YS5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7DQogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IG5ld1NpemUNCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgICAgY29uc29sZS5sb2cobmV3U2l6ZSkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgew0KICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IG5ld1BhZ2UNCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgICAgY29uc29sZS5sb2cobmV3UGFnZSkNCiAgICB9LA0KICAgIHNob3dBZGREaWFsb2coKXsNCiAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8vIOebkeWQrOa3u+WKoOWvueivneahhueahOWFs+mXreS6i+S7tg0KICAgIGFkZERpYWxvZ0Nsb3NlZCgpew0KICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCkNCiAgICAgIHRoaXMuJHJlZnMucGljdHVyZVJlZi5jbGVhckZpbGVzKCkNCiAgICAgIHRoaXMucGljcyA9IFtdDQogICAgICB0aGlzLnBpY3R1cmVMaXN0ID0gW10NCiAgICB9LA0KICAgIC8vIOebkeWQrOa3u+WKoOaMiemSrg0KICAgIGFzeW5jIGFkZFVzZXIoKXsNCiAgICAgIGF3YWl0IHRoaXMuc3VibWl0RmlsZSgpDQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY3R1cmVMaXN0KQ0KICAgICAgdGhpcy5hZGRGb3JtLnVzZXJQaWN0dXJlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCkNCiAgICAgIGxldCBzdWNjZXNzID0gdHJ1ZQ0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyh2YWxpZCkNCiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuDQogICAgICAgIC8vIOmihOagoemqjOaIkOWKn++8jOWPkee9kee7nOivt+axgg0KICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ3N5c1VzZXInLCBKU09OLnN0cmluZ2lmeShfdGhpcy5hZGRGb3JtKSkudGhlbihyZXNwID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwKQ0KICAgICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSAhPT0gMjAwKXsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOeUqOaIt+Wksei0pe+8gScpDQogICAgICAgICAgICBzdWNjZXNzID0gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgICAgICBpZiAoIXN1Y2Nlc3MpIHJldHVybg0KICAgICAgICAvL+makOiXj+a3u+WKoOWvueivneahhg0KICAgICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOeUqOaIt+aIkOWKn++8gScpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5pi+56S65L+u5pS55a+56K+d5qGG77yM5Zue5pi+5pWw5o2uDQogICAgYXN5bmMgc2hvd0VkaXREaWFsb2coaWQpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBhd2FpdCBheGlvcy5nZXQoJ3N5c1VzZXIvJyArIGlkKS50aGVuKHJlc3AgPT4gew0KICAgICAgICBfdGhpcy5lZGl0Rm9ybSA9IHJlc3AuZGF0YS5kYXRhDQogICAgICB9KQ0KICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEpTT04ucGFyc2UodGhpcy5lZGl0Rm9ybS51c2VyUGljdHVyZSkpIHsNCiAgICAgICAgbGV0IHBpYyA9IHt9DQogICAgICAgIHBpY1snbmFtZSddID0gJycNCiAgICAgICAgcGljWyd1cmwnXSA9IHRoaXMuZ2xvYmFsLmJhc2UgKyBpdGVtDQogICAgICAgIHRoaXMucGljcy5wdXNoKHBpYykNCiAgICAgIH0NCiAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICAvLyDnm5HlkKzkv67mlLnlr7nor53moYbnmoTlhbPpl63kuovku7YNCiAgICBlZGl0RGlhbG9nQ2xvc2VkKCl7DQogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCkNCiAgICAgIHRoaXMuJHJlZnMucGljdHVyZUVkaXRSZWYuY2xlYXJGaWxlcygpDQogICAgICB0aGlzLnBpY3MgPSBbXQ0KICAgICAgdGhpcy5waWN0dXJlTGlzdCA9IFtdDQogICAgfSwNCiAgICAvLyDlj5bmtojkv67mlLkNCiAgICBjYW5jZWxFZGl0KCl7DQogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuZGVsZXRlUGljTGlzdC5zcGxpY2UoMCwgdGhpcy5kZWxldGVQaWNMaXN0Lmxlbmd0aCkNCiAgICB9LA0KICAgIGFzeW5jIGVkaXRVc2VySW5mbygpew0KICAgICAgYXdhaXQgdGhpcy5zdWJtaXRGaWxlKCkNCiAgICAgIHRoaXMuZWRpdEZvcm0udXNlclBpY3R1cmUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY3R1cmVMaXN0KQ0KICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4NCiAgICAgICAgbGV0IHN1Y2Nlc3MgPSB0cnVlDQogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucHV0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICBhd2FpdCBheGlvcy5wdXQoJ3N5c1VzZXInLCBKU09OLnN0cmluZ2lmeShfdGhpcy5lZGl0Rm9ybSkpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS555So5oi35L+h5oGv5aSx6LSl77yBJykNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgaWYgKCFzdWNjZXNzKSByZXR1cm4NCiAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueeUqOaIt+S/oeaBr+aIkOWKn++8gScpDQogICAgICAgIGZvcihsZXQgcyBvZiB0aGlzLmRlbGV0ZVBpY0xpc3Qpew0KICAgICAgICAgIGF3YWl0IGF4aW9zLmdldCgnL3VwbG9hZC9kZWxldGU/ZmlsZVBhdGg9JyArIHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOebkeWQrOWkmumAieahhuWPmOWMlg0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpew0KICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbA0KICAgIH0sDQogICAgYXN5bmMgbXVsdGlwbGVEZWxldGUoKXsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgLy/or6Lpl67nlKjmiLfmmK/lkKbnoa7orqTliKDpmaQNCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTov5nkupvmnaHnm64sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpDQoNCiAgICAgIC8vIOeUqOaIt+ehruiupOWIoOmZpCwgcmVzcOS4uuWtl+espuS4siJjb25maXJtIg0KICAgICAgLy8g55So5oi35Y+W5raI5Yig6Zmk77yMcmVzcOS4uuWtl+espuS4siJjYW5jZWwiDQogICAgICBpZiAocmVzcCA9PT0gJ2NhbmNlbCcpew0KICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykNCiAgICAgIH0NCg0KICAgICAgbGV0IGlkcyA9IFtdDQogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgIGlkcy5wdXNoKGRhdGEudXNlcklkKQ0KICAgICAgfSkNCiAgICAgIGNvbnNvbGUubG9nKGlkcykNCiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgnc3lzVXNlci8nICsgaWRzKS50aGVuKHJlc3AgPT4gew0KICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgIT09IDIwMCl7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTnlKjmiLflpLHotKXvvIEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpDQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOeUqOaIt+aIkOWKn++8gScpDQogICAgfSwNCiAgICAvL+agueaNrmlk5Yig6Zmk5a+55bqU55qE5b2x5Y6F5YiG57G7DQogICAgYXN5bmMgZGVsZXRlVXNlckJ5SWQoaWQpew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICAvL+ivoumXrueUqOaIt+aYr+WQpuehruiupOWIoOmZpA0KICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeadoeebriwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkuY2F0Y2goZXJyID0+IGVycikNCg0KICAgICAgLy8g55So5oi356Gu6K6k5Yig6ZmkLCByZXNw5Li65a2X56ym5LiyImNvbmZpcm0iDQogICAgICAvLyDnlKjmiLflj5bmtojliKDpmaTvvIxyZXNw5Li65a2X56ym5LiyImNhbmNlbCINCiAgICAgIGNvbnNvbGUubG9nKHJlc3ApDQogICAgICBpZiAocmVzcCA9PT0gJ2NhbmNlbCcpew0KICAgICAgICByZXR1cm4gX3RoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykNCiAgICAgIH0NCg0KICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKCdzeXNVc2VyLycgKyBpZCkudGhlbihyZXNwID0+IHsNCiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApew0KICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOeUqOaIt+Wksei0pe+8gScpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmdldFVzZXJMaXN0KCkNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk55So5oi35oiQ5Yqf77yBJykNCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZShmaWxlKSB7DQogICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUudXJsDQogICAgICBjb25zb2xlLmxvZyhmaWxlUGF0aCkNCiAgICAgIGNvbnN0IGlkeCA9IHRoaXMucGljcy5maW5kSW5kZXgoeCA9PiB4LnVybCA9PT0gZmlsZVBhdGgpDQogICAgICBpZihmaWxlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKXsNCiAgICAgICAgdGhpcy5kZWxldGVQaWNMaXN0LnB1c2goZmlsZS51cmwpDQogICAgICB9DQogICAgICB0aGlzLnBpY3Muc3BsaWNlKGlkeCwgMSkNCiAgICB9LA0KICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7DQogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVsaXN0KXsNCiAgICAgIHRoaXMucGljcyA9IGZpbGVsaXN0LnNsaWNlKDApDQogICAgfSwNCiAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlKXsNCiAgICAgIHRoaXMucGljdHVyZUxpc3QucHVzaChyZXNwb25zZS5kYXRhKQ0KICAgICAgdGhpcy5hZGRGb3JtID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCkNCiAgICAgIHRoaXMuZWRpdEZvcm0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY3R1cmVMaXN0KQ0KICAgIH0sDQogICAgaGFuZGxlRXJyb3IoZXJyKXsNCiAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICB9LA0KICAgIGhhbmRsZUV4Y2VlZCgpew0KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi55So5oi35aS05YOP5pyA5aSa5LiK5Lyg5LiA5byg77yBIikNCiAgICB9LA0KICAgIGFzeW5jIHN1Ym1pdEZpbGUoKXsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpY3MubGVuZ3RoOyBpKyspew0KICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQ0KICAgICAgICBpZiAodGhpcy5waWNzW2ldLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7DQogICAgICAgICAgbGV0IHMgPSB0aGlzLnBpY3NbaV0udXJsDQogICAgICAgICAgdGhpcy5waWN0dXJlTGlzdC5wdXNoKHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSkNCiAgICAgICAgICBjb250aW51ZQ0KICAgICAgICB9DQogICAgICAgIGxldCBmaWxlID0gdGhpcy5waWNzW2ldLnJhdw0KICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKQ0KICAgICAgICBhd2FpdCBheGlvcy5wb3N0KCd1cGxvYWQvdXNlcicsIGZvcm1EYXRhKS50aGVuKHJlc3BvbnNlID0+ew0KICAgICAgICAgIF90aGlzLnBpY3R1cmVMaXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2V4Rm9ybWF0KHJvdyl7DQogICAgICBpZiAocm93LnNleCA9PT0gdHJ1ZSl7DQogICAgICAgIHJldHVybiAn55S3Jw0KICAgICAgfWVsc2Ugew0KICAgICAgICByZXR1cm4gJ+WlsycNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <!--面包屑导航区域-->\r\n    <div class=\"board\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户信息管理</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n\r\n    <!--卡片视图-->\r\n    <el-card class=\"box-card\">\r\n      <el-row :gutter=\"20\">\r\n\r\n        <el-col :span=\"4\">\r\n          <el-input placeholder=\"请输入用户名\" v-model=\"inputUserName\" clearable />\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-input placeholder=\"请输入邮箱\" v-model=\"inputEmail\" clearable />\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-input placeholder=\"请输入手机号\" v-model=\"inputPhoneNumber\" clearable />\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-select v-model=\"selectedSex\" placeholder=\"请选择性别\" clearable>\r\n            <el-option v-for=\"item in gender\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </el-col>\r\n        <el-col :span=\"2\">\r\n          <el-button icon=\"el-icon-search\" @click=\"getUserList\">搜索</el-button>\r\n        </el-col>\r\n        <el-col :span=\"2\">\r\n          <el-button type=\"primary\" @click=\"showAddDialog\">添加用户</el-button>\r\n        </el-col>\r\n        <el-col :span=\"2\">\r\n          <el-button type=\"danger\" @click=\"multipleDelete\">批量删除</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-table :data=\"userList\" style=\"width: 80%\" border stripe @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column prop=\"userName\" label=\"用户名\" width=\"120px\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"电子邮箱\"></el-table-column>\r\n        <el-table-column prop=\"phoneNumber\" label=\"手机号码\"></el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\" :formatter=\"sexFormat\" width=\"100px\"></el-table-column>\r\n        <el-table-column prop=\"sysRole.roleName\" label=\"角色\" width=\"120px\"></el-table-column>\r\n\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tooltip effect=\"dark\" content=\"修改用户信息\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.userId)\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"删除用户\" placement=\"top\" :enterable=\"false\" :open-delay=\"500\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteUserById(scope.row.userId)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!--分页区域-->\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"queryInfo.pageNum\"\r\n          :page-sizes=\"[5, 7, 9]\"\r\n          :page-size=\"queryInfo.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n      </el-pagination>\r\n\r\n    </el-card>\r\n\r\n    <!--添加用户对话框-->\r\n    <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" width=\"60%\" @close=\"addDialogClosed\">\r\n      <!--内容主题区-->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"150px\">\r\n        <!--prop：在addFormRules中定义校验规则， v-model：双向绑定数据-->\r\n        <el-form-item label=\"用户名\" prop=\"userName\">\r\n          <el-input v-model=\"addForm.userName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\" type=\"password\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电子邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号码\" prop=\"phoneNumber\">\r\n          <el-input v-model=\"addForm.phoneNumber\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-select v-model=\"addForm.sex\" placeholder=\"请选择性别\" clearable >\r\n            <el-option\r\n                v-for=\"item in gender\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\" prop=\"roleId\">\r\n          <el-select v-model=\"addForm.roleId\" placeholder=\"请选择权限\" clearable >\r\n            <el-option\r\n                v-for=\"item in roleList\"\r\n                :key=\"item.roleId\"\r\n                :label=\"item.roleName\"\r\n                :value=\"item.roleId\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\">\r\n          <el-upload action=\"\"\r\n                     list-type=\"picture-card\"\r\n                     :auto-upload=\"false\"\r\n                     :limit=\"1\"\r\n                     :file-list=\"pics\"\r\n                     :on-change=\"handleChange\"\r\n                     :on-success=\"handleSuccess\"\r\n                     :on-error=\"handleError\"\r\n                     :on-exceed=\"handleExceed\"\r\n                     ref=\"pictureRef\"\r\n                     :http-request=\"submitFile\">\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!--底部区域-->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!--修改用户对话框-->\r\n    <el-dialog title=\"修改用户信息\" :visible.sync=\"editDialogVisible\" width=\"60%\" @close=\"editDialogClosed\">\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"150px\">\r\n        <el-form-item label=\"用户名\" prop=\"userName\">\r\n          <el-input v-model=\"editForm.userName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"editForm.password\" type=\"password\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电子邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号码\" prop=\"phoneNumber\">\r\n          <el-input v-model=\"editForm.phoneNumber\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-select v-model=\"editForm.sex\" placeholder=\"请选择性别\" clearable >\r\n            <el-option\r\n                v-for=\"item in gender\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\" prop=\"roleId\">\r\n          <el-select v-model=\"editForm.roleId\" placeholder=\"请选择权限\" clearable >\r\n            <el-option\r\n                v-for=\"item in roleList\"\r\n                :key=\"item.roleId\"\r\n                :label=\"item.roleName\"\r\n                :value=\"item.roleId\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\">\r\n          <el-upload action=\"\"\r\n                     list-type=\"picture-card\"\r\n                     :auto-upload=\"false\"\r\n                     :limit=\"1\"\r\n                     :file-list=\"pics\"\r\n                     :on-change=\"handleChange\"\r\n                     :on-success=\"handleSuccess\"\r\n                     :on-error=\"handleError\"\r\n                     :on-exceed=\"handleExceed\"\r\n                     ref=\"pictureEditRef\"\r\n                     :http-request=\"submitFile\">\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelEdit\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport global from \"../../assets/css/global.css\"\r\nexport default {\r\n  data() {\r\n    let checkEmail = (rule, value, cb) => {\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n      if (regEmail.test(value)){\r\n        return cb()\r\n      }\r\n      cb(new Error('请输入合法的邮箱'))\r\n    }\r\n    let checkMobile = (rule, value, cb) => {\r\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n      if (regMobile.test(value)){\r\n        return cb()\r\n      }\r\n      cb(new Error('请输入合法的手机号码'))\r\n    }\r\n    return {\r\n      queryInfo: {\r\n        userName: '',\r\n        phoneNumber: '',\r\n        email: '',\r\n        sex: '',\r\n        pageNum: 1,\r\n        pageSize: 7\r\n      },\r\n      total: 0,\r\n      //控制对话框的显示与隐藏\r\n      addDialogVisible: false,\r\n      //添加影院的表单数据\r\n      addForm: {\r\n        userId: '',\r\n        userName: '',\r\n        password: '',\r\n        email: '',\r\n        phoneNumber: '',\r\n        sex: '',\r\n        userPicture: ''\r\n      },\r\n      //验证表单规则对象\r\n      addFormRules: {\r\n        userName: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入电子邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur'}\r\n        ],\r\n        phoneNumber: [\r\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur'}\r\n        ],\r\n        sex: [\r\n          { required: true, message: '请选择性别', trigger: 'change' }\r\n        ]\r\n      },\r\n      editDialogVisible: false,\r\n      editForm: {},\r\n      editFormRules: {\r\n        userName: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入电子邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur'}\r\n        ],\r\n        phoneNumber: [\r\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur'}\r\n        ],\r\n        sex: [\r\n          { required: true, message: '请选择性别', trigger: 'change' }\r\n        ]\r\n      },\r\n      inputUserName: '',\r\n      inputEmail: '',\r\n      inputPhoneNumber: '',\r\n      selectedSex: '',\r\n      userList: [],\r\n      gender: [\r\n        {\r\n          id: false,\r\n          name: '女'\r\n        },\r\n        {\r\n          id: true,\r\n          name: '男'\r\n        }\r\n      ],\r\n      multipleSelection: [],\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      //添加删除图片 动态绑定图片列表\r\n      pics: [],\r\n      // 发送给后端的JSON图片数组\r\n      pictureList: [],\r\n      picNums: 0,\r\n      deletePicList: [],\r\n      roleList: []\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserList()\r\n    this.getRoleList()\r\n  },\r\n  methods: {\r\n    getUserList() {\r\n      this.queryInfo.userName = this.inputUserName\r\n      this.queryInfo.email = this.inputEmail\r\n      this.queryInfo.phoneNumber = this.inputPhoneNumber\r\n      this.queryInfo.sex = this.selectedSex\r\n      const _this = this;\r\n      axios.get('sysUser', {params: _this.queryInfo}).then(resp => {\r\n        console.log(resp)\r\n        _this.userList = resp.data.data;\r\n        _this.total = resp.data.total;\r\n        _this.queryInfo.pageSize = resp.data.pageSize;\r\n        _this.queryInfo.pageNum = resp.data.pageNum;\r\n      })\r\n    },\r\n    getRoleList(){\r\n      const _this = this\r\n      axios.get('sysRole').then(resp => {\r\n        _this.roleList = resp.data.data\r\n      })\r\n    },\r\n    handleSizeChange(newSize) {\r\n      this.queryInfo.pageSize = newSize\r\n      this.getUserList()\r\n      console.log(newSize)\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pageNum = newPage\r\n      this.getUserList()\r\n      console.log(newPage)\r\n    },\r\n    showAddDialog(){\r\n      this.addDialogVisible = true\r\n    },\r\n    // 监听添加对话框的关闭事件\r\n    addDialogClosed(){\r\n      this.$refs.addFormRef.resetFields()\r\n      this.$refs.pictureRef.clearFiles()\r\n      this.pics = []\r\n      this.pictureList = []\r\n    },\r\n    // 监听添加按钮\r\n    async addUser(){\r\n      await this.submitFile()\r\n      console.log(this.pictureList)\r\n      this.addForm.userPicture = JSON.stringify(this.pictureList)\r\n      let success = true\r\n      const _this = this\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        console.log(valid)\r\n        if (!valid) return\r\n        // 预校验成功，发网络请求\r\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\r\n        await axios.post('sysUser', JSON.stringify(_this.addForm)).then(resp => {\r\n          console.log(resp)\r\n          if (resp.data.code !== 200){\r\n            this.$message.error('添加用户失败！')\r\n            success = false\r\n          }\r\n        })\r\n        this.getUserList()\r\n        if (!success) return\r\n        //隐藏添加对话框\r\n        this.addDialogVisible = false\r\n        this.$message.success('添加用户成功！')\r\n      })\r\n    },\r\n    // 显示修改对话框，回显数据\r\n    async showEditDialog(id){\r\n      const _this = this\r\n      await axios.get('sysUser/' + id).then(resp => {\r\n        _this.editForm = resp.data.data\r\n      })\r\n      for (const item of JSON.parse(this.editForm.userPicture)) {\r\n        let pic = {}\r\n        pic['name'] = ''\r\n        pic['url'] = this.global.base + item\r\n        this.pics.push(pic)\r\n      }\r\n      this.editDialogVisible = true\r\n    },\r\n    // 监听修改对话框的关闭事件\r\n    editDialogClosed(){\r\n      this.$refs.editFormRef.resetFields()\r\n      this.$refs.pictureEditRef.clearFiles()\r\n      this.pics = []\r\n      this.pictureList = []\r\n    },\r\n    // 取消修改\r\n    cancelEdit(){\r\n      this.editDialogVisible = false\r\n      this.deletePicList.splice(0, this.deletePicList.length)\r\n    },\r\n    async editUserInfo(){\r\n      await this.submitFile()\r\n      this.editForm.userPicture = JSON.stringify(this.pictureList)\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        const _this = this\r\n        if (!valid) return\r\n        let success = true\r\n        axios.defaults.headers.put['Content-Type'] = 'application/json'\r\n        await axios.put('sysUser', JSON.stringify(_this.editForm)).then(resp => {\r\n          if (resp.data.code !== 200){\r\n            this.$message.error('修改用户信息失败！')\r\n            success = false\r\n          }\r\n        })\r\n        if (!success) return\r\n        this.editDialogVisible = false\r\n        this.getUserList()\r\n        this.$message.success('修改用户信息成功！')\r\n        for(let s of this.deletePicList){\r\n          await axios.get('/upload/delete?filePath=' + s.substring(s.indexOf('/images')))\r\n        }\r\n      })\r\n    },\r\n    // 监听多选框变化\r\n    handleSelectionChange(val){\r\n      this.multipleSelection = val\r\n    },\r\n    async multipleDelete(){\r\n      const _this = this\r\n      //询问用户是否确认删除\r\n      const resp = await this.$confirm('此操作将永久删除这些条目, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 用户确认删除, resp为字符串\"confirm\"\r\n      // 用户取消删除，resp为字符串\"cancel\"\r\n      if (resp === 'cancel'){\r\n        return _this.$message.info('已取消删除')\r\n      }\r\n\r\n      let ids = []\r\n      this.multipleSelection.forEach(data => {\r\n        ids.push(data.userId)\r\n      })\r\n      console.log(ids)\r\n      await axios.delete('sysUser/' + ids).then(resp => {\r\n        if (resp.data.code !== 200){\r\n          this.$message.success('批量删除用户失败！')\r\n        }\r\n      })\r\n      this.getUserList()\r\n      this.$message.success('批量删除用户成功！')\r\n    },\r\n    //根据id删除对应的影厅分类\r\n    async deleteUserById(id){\r\n      const _this = this\r\n      //询问用户是否确认删除\r\n      const resp = await this.$confirm('此操作将永久删除该条目, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 用户确认删除, resp为字符串\"confirm\"\r\n      // 用户取消删除，resp为字符串\"cancel\"\r\n      console.log(resp)\r\n      if (resp === 'cancel'){\r\n        return _this.$message.info('已取消删除')\r\n      }\r\n\r\n      await axios.delete('sysUser/' + id).then(resp => {\r\n        if (resp.data.code !== 200){\r\n          _this.$message.success('删除用户失败！')\r\n        }\r\n      })\r\n      this.getUserList()\r\n      this.$message.success('删除用户成功！')\r\n    },\r\n    handleRemove(file) {\r\n      const filePath = file.url\r\n      console.log(filePath)\r\n      const idx = this.pics.findIndex(x => x.url === filePath)\r\n      if(file.status === 'success'){\r\n        this.deletePicList.push(file.url)\r\n      }\r\n      this.pics.splice(idx, 1)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleChange(file, filelist){\r\n      this.pics = filelist.slice(0)\r\n    },\r\n    handleSuccess(response){\r\n      this.pictureList.push(response.data)\r\n      this.addForm = JSON.stringify(this.pictureList)\r\n      this.editForm = JSON.stringify(this.pictureList)\r\n    },\r\n    handleError(err){\r\n      console.log(err)\r\n    },\r\n    handleExceed(){\r\n      this.$message.error(\"用户头像最多上传一张！\")\r\n    },\r\n    async submitFile(){\r\n      const _this = this\r\n      for (let i = 0; i < this.pics.length; i++){\r\n        let formData = new FormData()\r\n        if (this.pics[i].status === 'success') {\r\n          let s = this.pics[i].url\r\n          this.pictureList.push(s.substring(s.indexOf('/images')))\r\n          continue\r\n        }\r\n        let file = this.pics[i].raw\r\n        formData.append('file', file)\r\n        await axios.post('upload/user', formData).then(response =>{\r\n          _this.pictureList.push(response.data.data)\r\n        })\r\n      }\r\n    },\r\n    sexFormat(row){\r\n      if (row.sex === true){\r\n        return '男'\r\n      }else {\r\n        return '女'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.row{\r\n  white-space: nowrap;\r\n  margin-top: 10px;\r\n  padding: 0 10px;\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n\r\n</style>\r\n"]}]}