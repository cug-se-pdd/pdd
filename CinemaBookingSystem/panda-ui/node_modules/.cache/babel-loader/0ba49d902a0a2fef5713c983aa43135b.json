{"remainingRequest":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\src\\views\\cinema\\CinemaInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\src\\views\\cinema\\CinemaInfo.vue","mtime":1715002105629},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\babel.config.js","mtime":1715002093928},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002096653},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1715002095676},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002096653},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1715002104692}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBnbG9iYWwgZnJvbSAiLi4vLi4vYXNzZXRzL2Nzcy9nbG9iYWwuY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgLy8g5b2T5YmN6aG156CBCiAgICAgIHBhZ2VTaXplOiAyLAogICAgICAvLyDmr4/pobXmmL7npLrnmoTmnaHmlbAKICAgICAgdG90YWxDb3VudDogMCwKICAgICAgLy8g5pWw5o2u5oC75pWwCiAgICAgIGFsbENpbmVtYXM6IFtdLAogICAgICAvLyDmiYDmnInlvbHpmaLmlbDmja4KICAgICAgcGFnaW5hdGVkQ2luZW1hczogW10sCiAgICAgIC8vIOW9k+WJjemhteaYvuekuueahOW9semZouaVsOaNrgoKICAgICAgLy/mjqfliLblr7nor53moYbnmoTmmL7npLrkuI7pmpDol48KICAgICAgZWRpdERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBlZGl0Rm9ybToge30sCiAgICAgIGNpbmVtYUluZm86IHt9LAogICAgICBlZGl0Rm9ybVJ1bGVzOiB7CiAgICAgICAgY2luZW1hTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpea0u+WKqOWcsOeCueWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIGNpbmVtYUFkZHJlc3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmtLvliqjlnLDngrnlnLDlnYAnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBjaW5lbWFQaG9uZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpea0u+WKqOWcsOeCueeUteivnScsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGlucHV0SGFsbDogJycsCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGhpZGVVcGxvYWQ6IGZhbHNlLAogICAgICAvL+a3u+WKoOWIoOmZpOWbvueJhyDliqjmgIHnu5Hlrprlm77niYfliJfooagKICAgICAgcGljczogW10sCiAgICAgIC8v5re75Yqg5Yig6Zmk5Zy66aaG57G75YirIOWKqOaAgee7keWumuWcuummhuWIl+ihqAogICAgICBoYWxsczogW10sCiAgICAgIC8vIOWPkemAgee7meWQjuerr+eahEpTT07lm77niYfmlbDnu4QKICAgICAgcGljdHVyZUxpc3Q6IFtdLAogICAgICBwaWNOdW1zOiAwLAogICAgICBkZWxldGVQaWNMaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoQ2luZW1hcygpOyAvLyDlnKjnu4Tku7bliJvlu7rml7bojrflj5blvbHpmaLmlbDmja4KICAgIHRoaXMuZ2V0Q2luZW1hSW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hDaW5lbWFzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCJzeXNDaW5lbWFzIik7IC8vIOiOt+WPluaJgOacieW9semZogogICAgICAgIHRoaXMuYWxsQ2luZW1hcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB0aGlzLnRvdGFsQ291bnQgPSB0aGlzLmFsbENpbmVtYXMubGVuZ3RoOyAvLyDorr7nva7mlbDmja7mgLvmlbAKICAgICAgICB0aGlzLnBhZ2luYXRlQ2luZW1hcygpOyAvLyDmoLnmja7lvZPliY3pobXlkozmr4/pobXlpKflsI/orr7nva7mlbDmja4KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBmZXRjaGluZyBjaW5lbWFzOiIsIGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2luYXRlQ2luZW1hcygpIHsKICAgICAgLy8g5qC55o2u5b2T5YmN6aG15ZKM5q+P6aG15aSn5bCP6K6+572u5YiG6aG15ZCO55qE5b2x6Zmi5pWw5o2uCiAgICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemU7CiAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdGhpcy5wYWdlU2l6ZTsKICAgICAgdGhpcy5wYWdpbmF0ZWRDaW5lbWFzID0gdGhpcy5hbGxDaW5lbWFzLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gbmV3UGFnZTsgLy8g6K6+572u5b2T5YmN6aG1CiAgICAgIHRoaXMucGFnaW5hdGVDaW5lbWFzKCk7IC8vIOabtOaWsOWIhumhteWQjueahOaVsOaNrgogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3UGFnZVNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IG5ld1BhZ2VTaXplOyAvLyDorr7nva7mr4/pobXlpKflsI8KICAgICAgdGhpcy5wYWdpbmF0ZUNpbmVtYXMoKTsgLy8g5pu05paw5YiG6aG15ZCO55qE5pWw5o2uCiAgICB9LAogICAgYXN5bmMgZ2V0Q2luZW1hSW5mbygpIHsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOwogICAgICBhd2FpdCBheGlvcy5nZXQoJ3N5c0NpbmVtYXMnKS50aGVuKHJlc3AgPT4gewogICAgICAgIF90aGlzLmNpbmVtYUluZm8gPSByZXNwLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICAgIF90aGlzLnBpY3MgPSBbXTsKICAgICAgX3RoaXMuaGFsbHMgPSBbXTsKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEpTT04ucGFyc2UodGhpcy5jaW5lbWFJbmZvLmNpbmVtYVBpY3R1cmUpKSB7CiAgICAgICAgbGV0IHBpYyA9IHt9OwogICAgICAgIHBpY1snbmFtZSddID0gJyc7CiAgICAgICAgcGljWyd1cmwnXSA9IHRoaXMuZ2xvYmFsLmJhc2UgKyBpdGVtOwogICAgICAgIHRoaXMucGljcy5wdXNoKHBpYyk7CiAgICAgIH0KICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEpTT04ucGFyc2UodGhpcy5jaW5lbWFJbmZvLmhhbGxDYXRlZ29yeUxpc3QpKSB7CiAgICAgICAgdGhpcy5oYWxscy5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9LAogICAgLy8g5pi+56S65L+u5pS55a+56K+d5qGG77yM5Zue5pi+5pWw5o2uCiAgICBhc3luYyBzaG93RWRpdERpYWxvZygpIHsKICAgICAgdGhpcy5lZGl0Rm9ybSA9IHRoaXMuY2luZW1hSW5mbzsKICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g55uR5ZCs5L+u5pS55a+56K+d5qGG55qE5YWz6Zet5LqL5Lu2CiAgICBlZGl0RGlhbG9nQ2xvc2VkKCkgewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuJHJlZnMucGljdHVyZUVkaXRSZWYuY2xlYXJGaWxlcygpOwogICAgICB0aGlzLnBpY3MgPSBbXTsKICAgICAgdGhpcy5waWN0dXJlTGlzdCA9IFtdOwogICAgICB0aGlzLmhhbGxzID0gW107CiAgICAgIHRoaXMuZ2V0Q2luZW1hSW5mbygpOwogICAgfSwKICAgIC8vIOWPlua2iOS/ruaUuQogICAgY2FuY2VsRWRpdCgpIHsKICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmRlbGV0ZVBpY0xpc3Quc3BsaWNlKDAsIHRoaXMuZGVsZXRlUGljTGlzdC5sZW5ndGgpOwogICAgfSwKICAgIGFzeW5jIGVkaXRDaW5lbWFJbmZvKCkgewogICAgICBhd2FpdCB0aGlzLnN1Ym1pdEZpbGUoKTsKICAgICAgdGhpcy5lZGl0Rm9ybS5jaW5lbWFQaWN0dXJlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCk7CiAgICAgIHRoaXMuZWRpdEZvcm0uaGFsbENhdGVnb3J5TGlzdCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuaGFsbHMpOwogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIGxldCBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnB1dFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICAgICAgYXdhaXQgYXhpb3MucHV0KCdzeXNDaW5lbWEvdXBkYXRlJywgSlNPTi5zdHJpbmdpZnkoX3RoaXMuZWRpdEZvcm0pKS50aGVuKHJlc3AgPT4gewogICAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlICE9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS55rS75Yqo5Zyw54K55L+h5oGv5aSx6LSl77yBJyk7CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoIXN1Y2Nlc3MpIHJldHVybjsKICAgICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRDaW5lbWFJbmZvKCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnmtLvliqjlnLDngrnkv6Hmga/miJDlip/vvIEnKTsKICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuZGVsZXRlUGljTGlzdCkgewogICAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KCcvdXBsb2FkL2RlbGV0ZT9maWxlUGF0aD0nICsgaXRlbS5zdWJzdHJpbmcoaXRlbS5pbmRleE9mKCcvaW1hZ2VzJykpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEhhbGxDYXRlZ29yeSgpIHsKICAgICAgaWYgKHRoaXMuaW5wdXRIYWxsID09PSAnJyB8fCB0aGlzLmlucHV0SGFsbCA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuJGFsZXJ0KCflnLrppobnsbvliKvmt7vliqDlpLHotKXvvIHljp/lm6DvvJrmiYDmt7vliqDnmoTlnLrppobnsbvliKvkuI3og73kuLrnqbrjgIInLCAn5Zy66aaG57G75Yir5re75Yqg5byC5bi4JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhbGxzLmluY2x1ZGVzKHRoaXMuaW5wdXRIYWxsKSkgewogICAgICAgIHRoaXMuaGFsbHMucHVzaCh0aGlzLmlucHV0SGFsbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ+W3suWtmOWcqCcpOwogICAgICAgIHRoaXMuJGFsZXJ0KCflnLrppobnsbvliKvmt7vliqDlpLHotKXvvIHljp/lm6DvvJrmiYDmt7vliqDnmoTlnLrppobnsbvliKvlt7LlrZjlnKjjgIInLCAn5Zy66aaG57G75Yir5re75Yqg5byC5bi4JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5pbnB1dEhhbGwgPSAnJzsKICAgIH0sCiAgICBkZWxldGVIYWxsQ2F0ZWdvcnkoaW5kZXgpIHsKICAgICAgdGhpcy5oYWxscy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmhhbGxzKTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnVybDsKICAgICAgY29uc29sZS5sb2coZmlsZVBhdGgpOwogICAgICBjb25zdCBpZHggPSB0aGlzLnBpY3MuZmluZEluZGV4KHggPT4geC51cmwgPT09IGZpbGVQYXRoKTsKICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAnc3VjY2VzcycpIHsKICAgICAgICB0aGlzLmRlbGV0ZVBpY0xpc3QucHVzaChmaWxlLnVybCk7CiAgICAgIH0KICAgICAgdGhpcy5waWNzLnNwbGljZShpZHgsIDEpOwogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZWxpc3QpIHsKICAgICAgdGhpcy5waWNzID0gZmlsZWxpc3Quc2xpY2UoMCk7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSkgewogICAgICB0aGlzLnBpY3R1cmVMaXN0LnB1c2gocmVzcG9uc2UuZGF0YSk7CiAgICAgIHRoaXMuZWRpdEZvcm0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY3R1cmVMaXN0KTsKICAgIH0sCiAgICBoYW5kbGVFcnJvcihlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRGaWxlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5waWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgaWYgKHRoaXMucGljc1tpXS5zdGF0dXMgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgbGV0IHMgPSB0aGlzLnBpY3NbaV0udXJsOwogICAgICAgICAgdGhpcy5waWN0dXJlTGlzdC5wdXNoKHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLnBpY3NbaV0ucmF3OwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOwogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ3VwbG9hZC9jaW5lbWEnLCBmb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBfdGhpcy5waWN0dXJlTGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["global","data","currentPage","pageSize","totalCount","allCinemas","paginatedCinemas","editDialogVisible","editForm","cinemaInfo","editFormRules","cinemaName","required","message","trigger","cinemaAddress","cinemaPhone","inputHall","dialogImageUrl","dialogVisible","hideUpload","pics","halls","pictureList","picNums","deletePicList","created","fetchCinemas","getCinemaInfo","methods","response","axios","get","length","paginateCinemas","error","console","start","end","slice","handleCurrentChange","newPage","handleSizeChange","newPageSize","_this","then","resp","item","JSON","parse","cinemaPicture","pic","base","push","hallCategoryList","showEditDialog","editDialogClosed","$refs","editFormRef","resetFields","pictureEditRef","clearFiles","cancelEdit","splice","editCinemaInfo","submitFile","stringify","validate","valid","success","defaults","headers","put","code","$message","substring","indexOf","addHallCategory","$alert","confirmButtonText","includes","log","deleteHallCategory","index","handleRemove","file","fileList","filePath","url","idx","findIndex","x","status","handlePictureCardPreview","handleChange","filelist","handleSuccess","handleError","err","i","formData","FormData","s","raw","append","post"],"sources":["src/views/cinema/CinemaInfo.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!--面包屑导航区域-->\r\n    <div class=\"board\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>活动地点管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>活动地点信息管理</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n    <!--分页控件-->\r\n    <div class=\"pagination\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        @size-change=\"handleSizeChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-sizes=\"[5, 10, 20, 30]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"totalCount\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <!--卡片视图-->\r\n    <el-card class=\"box-card\" v-for=\"cinema in paginatedCinemas\" :key=\"cinema.cinemaId\">\r\n      <!--表格显示活动地点信息-->\r\n      <el-form :model=\"cinema\" label-width=\"150px\">\r\n        <el-form-item label=\"活动地点名称: \" prop=\"cinemaName\">\r\n          <el-input class=\"el-input-show\" v-model=\"cinema.cinemaName\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点地址: \" prop=\"cinemaAddress\">\r\n          <el-input class=\"el-input-show\" v-model=\"cinema.cinemaAddress\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点电话: \" prop=\"cinemaPhone\">\r\n          <el-input class=\"el-input-show\" v-model=\"cinema.cinemaPhone\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动时间: \">\r\n          <el-input class=\"el-input-show-time\" v-model=\"cinema.workStartTime\" disabled></el-input>\r\n          至\r\n          <el-input class=\"el-input-show-time\" v-model=\"cinema.workEndTime\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"拥有场馆类型: \">\r\n          <el-tag v-for=\"hall in JSON.parse(cinema.hallCategoryList)\" :key=\"hall\">{{hall}}</el-tag>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点图片: \">\r\n          <span v-for=\"item in JSON.parse(cinema.cinemaPicture)\">\r\n            <el-popover placement=\"left\" trigger=\"click\" width=\"300\">\r\n              <img :src=\"global.base + item\" width=\"200%\"/>\r\n              <img slot=\"reference\" :src=\"global.base + item\" :alt=\"item\"\r\n                   style=\"max-height: 300px; max-width: 300px; padding: 10px\"/>\r\n            </el-popover>\r\n          </span>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"cinemaName\">\r\n          <el-button type=\"primary\" @click=\"showEditDialog\">修改活动地点信息</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n\r\n\r\n    <!--修改活动地点对话框-->\r\n    <el-dialog title=\"修改活动地点\" :visible.sync=\"editDialogVisible\" width=\"60%\" @close=\"editDialogClosed\">\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"150px\">\r\n        <el-form-item label=\"活动地点名称\" prop=\"cinemaName\">\r\n          <el-input v-model=\"editForm.cinemaName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点地址\" prop=\"cinemaAddress\">\r\n          <el-input v-model=\"editForm.cinemaAddress\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点电话\" prop=\"cinemaPhone\">\r\n          <el-input v-model=\"editForm.cinemaPhone\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"开始营业时间\" prop=\"workStartTime\">\r\n          <el-time-picker\r\n            v-model=\"editForm.workStartTime\"\r\n            value-format=\"HH:mm\"\r\n            placeholder=\"选择开始营业时间\">\r\n          </el-time-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"结束营业时间\" prop=\"workEndTime\">\r\n          <el-time-picker\r\n            v-model=\"editForm.workEndTime\"\r\n            value-format=\"HH:mm\"\r\n            placeholder=\"选择结束营业时间\">\r\n          </el-time-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"拥有场馆类型\" prop=\"hallCategoryList\">\r\n          <el-input class=\"el-input-hall\" placeholder=\"请输入添加场馆类别名称\" v-model=\"inputHall\" clearable></el-input>\r\n          <el-button type=\"primary\" @click=\"addHallCategory()\">添加</el-button>\r\n        </el-form-item>\r\n        <el-form-item >\r\n          <el-tag\r\n            v-for=\"(item, index) in halls\"\r\n            :key=\"index\"\r\n            closable\r\n            @close=\"deleteHallCategory(index)\">\r\n            {{item}}\r\n          </el-tag>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"活动地点图片\">\r\n          <el-upload action=\"\" list-type=\"picture-card\"\r\n                     :auto-upload=\"false\"\r\n                     :file-list=\"pics\"\r\n                     :on-change=\"handleChange\"\r\n                     :on-success=\"handleSuccess\"\r\n                     :on-error=\"handleError\"\r\n                     ref=\"pictureEditRef\"\r\n                     :http-request=\"submitFile\">\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{file}\">\r\n              <img class=\"el-upload-list__item-thumbnail\"\r\n                   :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n                <span class=\"el-upload-list__item-preview\"\r\n                      @click=\"handlePictureCardPreview(file)\">\r\n                  <i class=\"el-icon-zoom-in\"></i>\r\n                </span>\r\n                <span class=\"el-upload-list__item-delete\"\r\n                      @click=\"handleRemove(file)\">\r\n                  <i class=\"el-icon-delete\"></i>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </el-upload>\r\n          <!--放大预览-->\r\n          <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelEdit\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editCinemaInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import global from \"../../assets/css/global.css\"\r\n  export default {\r\n    data() {\r\n      return {\r\n        currentPage: 1, // 当前页码\r\n        pageSize: 2, // 每页显示的条数\r\n        totalCount: 0, // 数据总数\r\n        allCinemas: [], // 所有影院数据\r\n        paginatedCinemas: [], // 当前页显示的影院数据\r\n\r\n        //控制对话框的显示与隐藏\r\n        editDialogVisible: false,\r\n        editForm: {},\r\n        cinemaInfo: {},\r\n        editFormRules: {\r\n          cinemaName: [\r\n            { required: true, message: '请输入活动地点名称', trigger: 'change' }\r\n          ],\r\n          cinemaAddress: [\r\n            { required: true, message: '请输入活动地点地址', trigger: 'change' }\r\n          ],\r\n          cinemaPhone: [\r\n            { required: true, message: '请输入活动地点电话', trigger: 'change' }\r\n          ]\r\n        },\r\n        inputHall: '',\r\n\r\n        dialogImageUrl: '',\r\n        dialogVisible: false,\r\n        hideUpload: false,\r\n        //添加删除图片 动态绑定图片列表\r\n        pics: [],\r\n        //添加删除场馆类别 动态绑定场馆列表\r\n        halls: [],\r\n        // 发送给后端的JSON图片数组\r\n        pictureList: [],\r\n        picNums: 0,\r\n        deletePicList: []\r\n      }\r\n    },\r\n    created() {\r\n      this.fetchCinemas(); // 在组件创建时获取影院数据\r\n      this.getCinemaInfo()\r\n    },\r\n    methods: {\r\n      async fetchCinemas() {\r\n        try {\r\n          const response = await axios.get(\"sysCinemas\"); // 获取所有影院\r\n          this.allCinemas = response.data.data;\r\n          this.totalCount = this.allCinemas.length; // 设置数据总数\r\n          this.paginateCinemas(); // 根据当前页和每页大小设置数据\r\n        } catch (error) {\r\n          console.error(\"Error fetching cinemas:\", error);\r\n        }\r\n      },\r\n      paginateCinemas() {\r\n        // 根据当前页和每页大小设置分页后的影院数据\r\n        const start = (this.currentPage - 1) * this.pageSize;\r\n        const end = start + this.pageSize;\r\n        this.paginatedCinemas = this.allCinemas.slice(start, end);\r\n      },\r\n      handleCurrentChange(newPage) {\r\n        this.currentPage = newPage; // 设置当前页\r\n        this.paginateCinemas(); // 更新分页后的数据\r\n      },\r\n      handleSizeChange(newPageSize) {\r\n        this.pageSize = newPageSize; // 设置每页大小\r\n        this.paginateCinemas(); // 更新分页后的数据\r\n      },\r\n\r\n\r\n\r\n      async getCinemaInfo() {\r\n        const _this = this\r\n        await axios.get('sysCinemas').then(resp => {\r\n          _this.cinemaInfo = resp.data.data\r\n        })\r\n        _this.pics = []\r\n        _this.halls = []\r\n\r\n        for (const item of JSON.parse(this.cinemaInfo.cinemaPicture)) {\r\n          let pic = {}\r\n          pic['name'] = ''\r\n          pic['url'] = this.global.base + item\r\n          this.pics.push(pic)\r\n        }\r\n        for (const item of JSON.parse(this.cinemaInfo.hallCategoryList)) {\r\n          this.halls.push(item)\r\n        }\r\n      },\r\n      // 显示修改对话框，回显数据\r\n      async showEditDialog() {\r\n        this.editForm = this.cinemaInfo\r\n        this.editDialogVisible = true\r\n      },\r\n      // 监听修改对话框的关闭事件\r\n      editDialogClosed() {\r\n        this.$refs.editFormRef.resetFields()\r\n        this.$refs.pictureEditRef.clearFiles()\r\n        this.pics = []\r\n        this.pictureList = []\r\n        this.halls = []\r\n        this.getCinemaInfo()\r\n      },\r\n      // 取消修改\r\n      cancelEdit() {\r\n        this.editDialogVisible = false\r\n        this.deletePicList.splice(0, this.deletePicList.length)\r\n      },\r\n      async editCinemaInfo() {\r\n        await this.submitFile()\r\n        this.editForm.cinemaPicture = JSON.stringify(this.pictureList)\r\n        this.editForm.hallCategoryList = JSON.stringify(this.halls)\r\n        this.$refs.editFormRef.validate(async valid => {\r\n          const _this = this\r\n          if (!valid) return\r\n          let success = true\r\n          axios.defaults.headers.put['Content-Type'] = 'application/json'\r\n          await axios.put('sysCinema/update', JSON.stringify(_this.editForm)).then(resp => {\r\n            if (resp.data.code !== 200){\r\n              this.$message.error('修改活动地点信息失败！')\r\n              success = false\r\n            }\r\n          })\r\n          if (!success) return\r\n          this.editDialogVisible = false\r\n          await this.getCinemaInfo()\r\n          this.$message.success('修改活动地点信息成功！')\r\n          for(let item of this.deletePicList) {\r\n            await axios.get('/upload/delete?filePath=' + item.substring(item.indexOf('/images')))\r\n          }\r\n        })\r\n      },\r\n      addHallCategory() {\r\n        if (this.inputHall === '' || this.inputHall === null) {\r\n          this.$alert('场馆类别添加失败！原因：所添加的场馆类别不能为空。', '场馆类别添加异常', {\r\n            confirmButtonText: '我知道了'\r\n          })\r\n          return\r\n        } else if (!this.halls.includes(this.inputHall)) {\r\n          this.halls.push(this.inputHall)\r\n        } else {\r\n          console.log('已存在')\r\n          this.$alert('场馆类别添加失败！原因：所添加的场馆类别已存在。', '场馆类别添加异常', {\r\n            confirmButtonText: '我知道了'\r\n          })\r\n        }\r\n        this.inputHall = ''\r\n      },\r\n      deleteHallCategory(index) {\r\n        this.halls.splice(index, 1)\r\n        console.log(this.halls)\r\n      },\r\n      handleRemove(file, fileList) {\r\n        const filePath = file.url\r\n        console.log(filePath)\r\n        const idx = this.pics.findIndex(x => x.url === filePath)\r\n        if (file.status === 'success') {\r\n          this.deletePicList.push(file.url)\r\n        }\r\n        this.pics.splice(idx, 1)\r\n      },\r\n      handlePictureCardPreview(file) {\r\n        this.dialogImageUrl = file.url\r\n        this.dialogVisible = true\r\n      },\r\n      handleChange(file, filelist){\r\n        this.pics = filelist.slice(0)\r\n      },\r\n      handleSuccess(response){\r\n        this.pictureList.push(response.data)\r\n        this.editForm = JSON.stringify(this.pictureList)\r\n      },\r\n      handleError(err){\r\n        console.log(err)\r\n      },\r\n      async submitFile() {\r\n        const _this = this\r\n        for (let i = 0; i < this.pics.length; i++){\r\n          let formData = new FormData()\r\n          if (this.pics[i].status === 'success') {\r\n            let s = this.pics[i].url\r\n            this.pictureList.push(s.substring(s.indexOf('/images')))\r\n            continue\r\n          }\r\n          let file = this.pics[i].raw\r\n          formData.append('file', file)\r\n          await axios.post('upload/cinema', formData).then(response =>{\r\n            _this.pictureList.push(response.data.data)\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.el-tag{\r\n  margin: 0 10px 10px 0;\r\n}\r\n.row{\r\n  white-space: nowrap;\r\n  margin-top: 10px;\r\n  padding: 0 10px;\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.row2{\r\n  margin-top: 20px;\r\n}\r\n.el-input-show{\r\n  width: 420px;\r\n}\r\n.el-input-show-time{\r\n  width: 100px;\r\n}\r\n.el-input-hall {\r\n  width: 240px;\r\n  margin: 0 20px 0px 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}