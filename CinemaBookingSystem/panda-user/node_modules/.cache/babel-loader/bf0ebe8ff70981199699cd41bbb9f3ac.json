{"remainingRequest":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\babel-loader\\lib\\index.js!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\src\\views\\pay\\ChooseSeat.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\src\\views\\pay\\ChooseSeat.vue","mtime":1715333545746},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\babel.config.js","mtime":1715002105634},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002107957},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\babel-loader\\lib\\index.js","mtime":1715002107113},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002107957},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\vue-loader\\lib\\index.js","mtime":1715002115483}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNob29zZVNlYXQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1NlbGVjdGVkOiB7CiAgICAgICAgMDogJ3NlYXQtZGVmYXVsdCcsCiAgICAgICAgMTogJ3NlYXQtbm8nLAogICAgICAgIDI6ICdzZWF0LXBpY2snLAogICAgICAgIDM6ICdzZWF0LXNvbGQnCiAgICAgIH0sCiAgICAgIHNlYXRzOiB7fSwKICAgICAgc2Vzc2lvbklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuc2Vzc2lvbklkLAogICAgICBzZXNzaW9uOiB7CiAgICAgICAgc3lzTW92aWU6IHsKICAgICAgICAgIG1vdmllQ2F0ZWdvcnlMaXN0OiBbXQogICAgICAgIH0sCiAgICAgICAgc3lzQ2luZW1hOiB7fSwKICAgICAgICBzeXNIYWxsOiB7fQogICAgICB9LAogICAgICBwaWNrZWRTZWF0czogW10sCiAgICAgIGFkZEZvcm06IHsKICAgICAgICB1c2VySWQ6IDAsCiAgICAgICAgc2Vzc2lvbklkOiAwLAogICAgICAgIHNlYXRzOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0U2Vzc2lvbigpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGE6IHJlc3AKICAgICAgfSA9IGF3YWl0IGF4aW9zLmdldCgnc3lzU2Vzc2lvbi9maW5kLycgKyB0aGlzLnNlc3Npb25JZCk7CiAgICAgIGlmIChyZXNwLmNvZGUgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5tc2cpOwogICAgICB0aGlzLnNlc3Npb24gPSByZXNwLmRhdGE7CiAgICAgIHRoaXMuc2Vzc2lvbi5zeXNNb3ZpZS5tb3ZpZVBvc3RlciA9IHRoaXMuZ2xvYmFsLmJhc2UgKyBKU09OLnBhcnNlKHRoaXMuc2Vzc2lvbi5zeXNNb3ZpZS5tb3ZpZVBvc3RlcilbMF07CiAgICAgIHRoaXMuc2VhdHMgPSBKU09OLnBhcnNlKHJlc3AuZGF0YS5zZXNzaW9uU2VhdHMpOwogICAgICB0aGlzLnNlc3Npb24uc3lzTW92aWUubW92aWVDYXRlZ29yeUxpc3QgPSB0aGlzLnNlc3Npb24uc3lzTW92aWUubW92aWVDYXRlZ29yeUxpc3QubWFwKChvYmosIGluZGV4KSA9PiB7CiAgICAgICAgcmV0dXJuIG9iai5tb3ZpZUNhdGVnb3J5TmFtZTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCfliqDovb3pobXpnaLml7bnmoTluqfkvY3nirbmgIEnKTsKICAgICAgY29uc29sZS5sb2codGhpcy5zZWF0cyk7CiAgICB9LAogICAgcHJlc3NTZWF0KGtleSwgaWR4KSB7CiAgICAgIGxldCBzZWF0X3N0ciA9IGtleSArICLmjpIiICsgKGlkeCArIDEpICsgIuW6pyI7CiAgICAgIC8vIOmAieW6pwogICAgICBpZiAodGhpcy5zZWF0c1trZXldW2lkeF0gPT09IDApIHsKICAgICAgICAvLyDliKTmlq3pgInluqfmmK/lkKbotoXov4c15Liq77yM6LaF6L+HNeS4quWImeS4jeiDvemAiQogICAgICAgIGlmICh0aGlzLnBpY2tlZFNlYXRzLmxlbmd0aCA9PT0gNSkgewogICAgICAgICAgdGhpcy4kYWxlcnQoJ+aCqOacgOWkmumAieaLqeS6lOS4quW6p+S9jScsICfmj5DnpLonLCB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2VhdHNba2V5XSwgaWR4LCAyKTsKICAgICAgICB0aGlzLnBpY2tlZFNlYXRzLnB1c2goc2VhdF9zdHIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VhdHNba2V5XVtpZHhdID09PSAyKSB7CiAgICAgICAgLy8g5Y+W5raI6YCJ5bqnCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2VhdHNba2V5XSwgaWR4LCAwKTsKICAgICAgICB0aGlzLnBpY2tlZFNlYXRzLnNwbGljZSh0aGlzLnBpY2tlZFNlYXRzLmluZGV4T2Yoc2VhdF9zdHIpLCAxKTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY2tlZFNlYXRzKTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRCaWxsKCkgewogICAgICAvLyDojrflj5Z0b2tlbu+8jOagoemqjOeZu+W9lQogICAgICBjb25zdCB0b2tlbiA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb25JZCcsIHRoaXMuc2Vzc2lvbi5zZXNzaW9uSWQpOwogICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHmj5DkuqTpooTnuqbliY3vvIzor7flhYjnmbvlvZUnLCAn5o+Q5Lqk6aKE57qm5byC5bi46YCa55+lJywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLAogICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g5qCh6aqM5piv5ZCm6YCJ5bqn77yM5pyq6YCJ5bqn5YiZ6K2m5ZGKCiAgICAgIC8vIOacgOWwj+W6p+S9jeaYryAxCiAgICAgIGlmICh0aGlzLnBpY2tlZFNlYXRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJGFsZXJ0KCfmirHmrYnvvIHmgqjmmoLml7bmnKrpgInluqfvvIzml6Dms5Xmj5DkuqTpooTnuqbvvIzor7fpgInluqflkI7mj5DkuqTpooTnuqbjgIInLCAn5o+Q5Lqk6aKE57qm5byC5bi46YCa55+lJywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLAogICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvY2hvb3NlU2VhdC8nICsgdGhpcy5zZXNzaW9uSWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvL+iOt+WPluWcuuasoeW6p+S9jeS/oeaBrwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YTogY3VyU2Vzc2lvbgogICAgICB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uL2ZpbmQvJyArIHRoaXMuc2Vzc2lvbklkKTsKICAgICAgbGV0IHNlc3Npb25TZWF0cyA9IEpTT04ucGFyc2UoY3VyU2Vzc2lvbi5kYXRhLnNlc3Npb25TZWF0cyk7CiAgICAgIC8v6Kej5p6Q5Ye66aKE57qm6YCJ5oup55qE5bqn5L2N77yM5pu05paw5bqn5L2N5L+h5oGvCiAgICAgIGZvciAobGV0IHNlYXQgb2YgdGhpcy5waWNrZWRTZWF0cykgewogICAgICAgIGxldCByb3cgPSBzZWF0LnN1YnN0cmluZygwLCBzZWF0LmluZGV4T2YoJ+aOkicpKTsKICAgICAgICBsZXQgY29sID0gTnVtYmVyLnBhcnNlSW50KHNlYXQuc3Vic3RyaW5nKHNlYXQuaW5kZXhPZign5o6SJykgKyAxLCBzZWF0Lmxlbmd0aCAtIDEpKTsKICAgICAgICBpZiAoc2Vzc2lvblNlYXRzW3Jvd11bY29sIC0gMV0gPT09IDMpIHsKICAgICAgICAgIC8vIOabtOaWsOW6p+S9jeS/oeaBrwogICAgICAgICAgdGhpcy5zZWF0cyA9IEpTT04ucGFyc2UoY3VyU2Vzc2lvbi5kYXRhLnNlc3Npb25TZWF0cyk7CiAgICAgICAgICB0aGlzLiRhbGVydCgn5oqx5q2J77yB5oKo5omA6YCJ55qE5bqn5L2NJyArIHNlYXQgKyAn5bey6KKr5Y2g55So77yM6K+36YeN5paw6YCJ5oup44CCJywgJ+mAieW6p+W8guW4uOmAmuefpScsIHsKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPkuoYnLAogICAgICAgICAgICBjYWxsYmFjazogYWN0aW9uID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Nob29zZVNlYXQvJyArIHRoaXMuc2Vzc2lvbklkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlc3Npb25TZWF0c1tyb3ddW2NvbCAtIDFdID0gMzsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ+aPkOS6pOmihOe6puWQjueahOW6p+S9jeeKtuaAgScpOwogICAgICBjb25zb2xlLmxvZyhzZXNzaW9uU2VhdHMpOwogICAgICB0aGlzLmFkZEZvcm0udXNlcklkID0gSlNPTi5wYXJzZSh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5Vc2VyJykpLnVzZXJJZDsKICAgICAgdGhpcy5hZGRGb3JtLnNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkOwogICAgICB0aGlzLmFkZEZvcm0uc2VhdHMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY2tlZFNlYXRzKTsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKICAgICAgY29uc3QgewogICAgICAgIGRhdGE6IHJlcwogICAgICB9ID0gYXdhaXQgYXhpb3MucG9zdCgnc3lzQmlsbCcsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBzeXNCaWxsOiB0aGlzLmFkZEZvcm0sCiAgICAgICAgc2Vzc2lvblNlYXRzOiBKU09OLnN0cmluZ2lmeShzZXNzaW9uU2VhdHMpCiAgICAgIH0pKTsKICAgICAgLy8gY29uc3QgeyBkYXRhOiByZXN9ID0gYXdhaXQgYXhpb3MucG9zdCgnc3lzQmlsbCcsIEpTT04uc3RyaW5naWZ5KHRoaXMuYWRkRm9ybSkpOwogICAgICBpZiAocmVzLmNvZGUgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOmihOe6puWksei0pe+8gScpOwogICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCgnL2JpbGxEZXRhaWwvJyArIHJlcy5kYXRhLmJpbGxJZCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["moment","Message","name","data","isSelected","seats","sessionId","$route","params","session","sysMovie","movieCategoryList","sysCinema","sysHall","pickedSeats","addForm","userId","created","getSession","methods","resp","axios","get","code","$message","error","msg","moviePoster","global","base","JSON","parse","sessionSeats","map","obj","index","movieCategoryName","console","log","pressSeat","key","idx","seat_str","length","$alert","confirmButtonText","type","catch","err","$set","push","splice","indexOf","submitBill","token","window","sessionStorage","getItem","setItem","callback","action","$router","curSession","seat","row","substring","col","Number","parseInt","stringify","defaults","headers","post","res","sysBill","billId"],"sources":["src/views/pay/ChooseSeat.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-steps :active=\"2\" align-center>\r\n      <el-step title=\"选择活动场次\"></el-step>\r\n      <el-step title=\"选择座位\"></el-step>\r\n      <el-step title=\"15分钟内提交\"></el-step>\r\n      <el-step title=\"活动地点取票参与\"></el-step>\r\n    </el-steps>\r\n    <div class=\"whole\">\r\n      <div class=\"left\">\r\n        <div class=\"seat-example\">\r\n          <span class=\"seat\" :class=\"isSelected[0]\"></span>\r\n          <span style=\"margin: 0 20px\">可选座位</span>\r\n          <span class=\"seat\" :class=\"isSelected[3]\"></span>\r\n          <span style=\"margin: 0 20px\">不可选座位</span>\r\n          <span class=\"seat\" :class=\"isSelected[2]\"></span>\r\n          <span style=\"margin: 0 20px\">已选座位</span>\r\n        </div>\r\n\r\n        <div class=\"screen\">场馆中央</div>\r\n\r\n        <div class=\"seat-content\">\r\n            <div class=\"row\" v-for=\"(value, key) in seats\">\r\n              <span style=\"width:10px;margin-right: 50px\">{{key}}</span>\r\n              <div style=\"display: flex; justify-content: flex-end\">\r\n                <span class=\"seat\"\r\n                      :class=\"isSelected[seats[key][index]]\"\r\n                      @click=\"pressSeat(key, index)\"\r\n                      v-for=\"(item, index) in value\"></span>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"right\">\r\n        <div class=\"right-content\">\r\n          <div class=\"right-header\">\r\n            <div class=\"poster\">\r\n              <img :src=\"session.sysMovie.moviePoster\" alt=\"\">\r\n            </div>\r\n            <div class=\"movie-info\">\r\n              <p style=\"font-size: 20px;font-weight: 700\">{{session.sysMovie.movieName}}</p>\r\n              <span>类型：{{session.sysMovie.movieCategoryList.join('/')}}</span>\r\n              <span>时长：{{session.sysMovie.movieLength}}分钟</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"right-content\">\r\n            <div class=\"info-item\">\r\n              <span>活动地点：</span>\r\n              <span>{{session.sysHall.sysCinema.cinemaName}}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span>场馆：</span>\r\n              <span>{{session.sysHall.hallName}}</span>\r\n            </div>\r\n<!--            <div class=\"info-item\">-->\r\n<!--              <span>版本：</span>-->\r\n<!--              <span>{{session.languageVersion}}</span>-->\r\n<!--            </div>-->\r\n            <div class=\"info-item\">\r\n              <span>场次：</span>\r\n              <span>{{session.sessionDate}} {{session.playTime}}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span>热度：</span>\r\n              <span>￥{{session.sessionPrice}}</span>\r\n            </div>\r\n            <span style=\"color: #999\">座位：</span>\r\n            <div class=\"seat-chose\">\r\n              <span class=\"ticket\" v-if=\"pickedSeats.length > 0\" v-for=\"item in pickedSeats\">{{ item }}</span>\r\n            </div>\r\n            <div class=\"info-item\" style=\"align-items: center\">\r\n              <span style=\"color: #333\">总价：</span>\r\n              <span style=\"font-size: 20px;color: #f03d37\">￥{{session.sessionPrice * pickedSeats.length}}</span>\r\n            </div>\r\n            <div style=\"text-align: center;margin-top: 30px\">\r\n              <el-button type=\"danger\" round @click=\"submitBill\">提交预约</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport { Message } from \"element-ui\";\r\nexport default {\r\n  name: \"ChooseSeat\",\r\n  data() {\r\n    return {\r\n      isSelected: {\r\n        0: 'seat-default',\r\n        1: 'seat-no',\r\n        2: 'seat-pick',\r\n        3: 'seat-sold'\r\n      },\r\n      seats: {},\r\n      sessionId: this.$route.params.sessionId,\r\n      session: {\r\n        sysMovie: {\r\n          movieCategoryList: []\r\n        },\r\n        sysCinema: {},\r\n        sysHall: {}\r\n      },\r\n      pickedSeats: [],\r\n      addForm: {\r\n        userId: 0,\r\n        sessionId: 0,\r\n        seats: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getSession()\r\n  },\r\n  methods: {\r\n    async getSession(){\r\n      const {data: resp} = await axios.get('sysSession/find/' + this.sessionId )\r\n      if(resp.code !== 200) return this.$message.error(resp.msg)\r\n      this.session = resp.data\r\n      this.session.sysMovie.moviePoster = this.global.base + JSON.parse(this.session.sysMovie.moviePoster)[0]\r\n      this.seats = JSON.parse(resp.data.sessionSeats)\r\n      this.session.sysMovie.movieCategoryList = this.session.sysMovie.movieCategoryList.map((obj, index) => {\r\n        return obj.movieCategoryName\r\n      })\r\n      console.log('加载页面时的座位状态')\r\n      console.log(this.seats)\r\n    },\r\n    pressSeat(key, idx) {\r\n      let seat_str = key + \"排\" + (idx+1) + \"座\"\r\n      // 选座\r\n      if (this.seats[key][idx] === 0) {\r\n        // 判断选座是否超过5个，超过5个则不能选\r\n        if (this.pickedSeats.length === 5) {\r\n          this.$alert('您最多选择五个座位', '提示', {\r\n            confirmButtonText: '确定',\r\n            type: 'warning'\r\n          }).catch(err => err)\r\n          return\r\n        }\r\n        this.$set(this.seats[key], idx, 2)\r\n        this.pickedSeats.push(seat_str)\r\n      } else if (this.seats[key][idx] === 2) {\r\n        // 取消选座\r\n        this.$set(this.seats[key], idx, 0)\r\n        this.pickedSeats.splice(this.pickedSeats.indexOf(seat_str), 1)\r\n      }\r\n      console.log(this.pickedSeats)\r\n    },\r\n    async submitBill() {\r\n      // 获取token，校验登录\r\n      const token = window.sessionStorage.getItem(\"token\")\r\n      if (!token) {\r\n        window.sessionStorage.setItem('sessionId', this.session.sessionId)\r\n        this.$alert('抱歉！提交预约前，请先登录', '提交预约异常通知', {\r\n          confirmButtonText: '我知道了',\r\n          callback: action => {\r\n            this.$router.push('/login')\r\n          }\r\n        })\r\n        return\r\n      }\r\n      // 校验是否选座，未选座则警告\r\n      // 最小座位是 1\r\n      if (this.pickedSeats.length === 0){\r\n        this.$alert('抱歉！您暂时未选座，无法提交预约，请选座后提交预约。', '提交预约异常通知', {\r\n          confirmButtonText: '我知道了',\r\n          callback: action => {\r\n            this.$router.push('/chooseSeat/' + this.sessionId)\r\n          }\r\n        })\r\n        return\r\n      }\r\n      //获取场次座位信息\r\n      const { data : curSession } = await axios.get('sysSession/find/' + this.sessionId)\r\n      let sessionSeats = JSON.parse(curSession.data.sessionSeats)\r\n      //解析出预约选择的座位，更新座位信息\r\n      for (let seat of this.pickedSeats) {\r\n        let row = seat.substring(0, seat.indexOf('排'))\r\n        let col = Number.parseInt(seat.substring(seat.indexOf('排') + 1, seat.length - 1))\r\n        if (sessionSeats[row][col - 1] === 3){\r\n          // 更新座位信息\r\n          this.seats = JSON.parse(curSession.data.sessionSeats)\r\n          this.$alert('抱歉！您所选的座位'+seat+'已被占用，请重新选择。', '选座异常通知', {\r\n            confirmButtonText: '我知道了',\r\n            callback: action => {\r\n              this.$router.push('/chooseSeat/' + this.sessionId)\r\n            }\r\n          })\r\n          return\r\n        } else {\r\n          sessionSeats[row][col - 1] = 3\r\n        }\r\n      }\r\n      console.log('提交预约后的座位状态')\r\n      console.log(sessionSeats)\r\n\r\n      this.addForm.userId = JSON.parse(window.sessionStorage.getItem('loginUser')).userId\r\n      this.addForm.sessionId = this.sessionId\r\n      this.addForm.seats = JSON.stringify(this.pickedSeats)\r\n      axios.defaults.headers.post['Content-Type'] = 'application/json'\r\n      const { data: res } = await axios.post('sysBill', JSON.stringify({sysBill: this.addForm, sessionSeats: JSON.stringify(sessionSeats)}))\r\n      // const { data: res} = await axios.post('sysBill', JSON.stringify(this.addForm));\r\n      if(res.code !== 200) return this.$message.error('添加预约失败！')\r\n      await this.$router.push('/billDetail/' + res.data.billId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.el-step {\r\n  margin: 40px auto;\r\n}\r\n\r\n.whole{\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  border: 1px solid #e5e5e5;\r\n  display: flex;\r\n}\r\n\r\n.left {\r\n  width: 820px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-right: 1px solid #e5e5e5;\r\n}\r\n\r\n.right{\r\n  width: 340px;\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n}\r\n\r\n.seat {\r\n  display: inline-block;\r\n  width: 30px;\r\n  height: 26px;\r\n  margin: 0 5px;\r\n  background-position: 0 1px;\r\n}\r\n\r\n.seat-default {\r\n  background: url(\"../../assets/sofa-unpick.png\") no-repeat;\r\n  background-size: cover;\r\n}\r\n\r\n.seat-empty {\r\n  background: url(\"../../assets/sofa-empty.png\") no-repeat;\r\n  background-size: cover;\r\n}\r\n\r\n.seat-sold {\r\n  background: url(\"../../assets/sofa-forbidden.png\") no-repeat;\r\n  background-size: cover;\r\n}\r\n\r\n.seat-pick{\r\n  background: url(\"../../assets/sofa-pick.png\") no-repeat;\r\n  background-size: cover;\r\n}\r\n\r\n.seat-example{\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 20px 0 0 0;\r\n}\r\n\r\n.screen{\r\n  width: 550px;\r\n  padding-top: 50px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n  color: #666;\r\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAj4AAAAnCAYAAAAPdELWAAAAAXNSR0IArs4c6QAADq9JREFUeAHtnVlvFMsZhnuZMfthXwwWRsgxAQkkxJUvIluRAuIHEClSIuU38AOC+TdJkHLLXQIXEUKIWAdFRmDwsTEY2SxiXzzdVXnfz1N9usdj4wU7cPy2NFR3dXd1z2MMj776qiqOvs4Wh2a892FXpQiIgAiIgAiIgAismEAc/6wZK22saGmRDcULic3ly5eL9i5durTIJnWZCIiACIiACIiACLQnALewE/CKeSMrSxGjQlTaP25ObTw4OGj3zCc2V65cqbR54cKFOY2oQgREQAREQAREQATmIwCXqJyCS8wrPbjQL0V8apWW2xwgwlMRmWBe4VKKTllu9u7dW1x///79+Pbt2+FSlSIgAiIgAiIgAiLwRQJwiXlFh1LUKkKl3ig4kGnIvPcXktLyFrN3NfN1QhdWM8pj565duxYPDAxEEJv4zJkz0fDwsNV3dHRY+fjxYyuPHDnS0rQORUAEREAEREAERGB+AmNjY1FXV1chLzMzM/7EiRN2zIDK27dvPRzEjssixOBMuUsMElS0EZ5mchIOmmVrHk/MqA7Fpr+/P9q2bVshOpScnp6ecHtM2UnTNH727Jm1ixdLwkmWe/bsiV69etXumeXLtC8CIiACIiACIrCOCGRZVhEUuIWbmpoyAo1Gw+/fv99PTExEfX19jpUPHjyIRkZGou7ubv/x40ePAAzv9yUJKtprlZ9WCWmVHrYf5IXdVpSeGA+Ma7WafV6+fGnneUzpYVcX5ebNmzfxjh07eH+xJUkSv3v3rvWZxXntiIAIiIAIiIAIrD8CeZ57BFYKWYFHRD/88IMdI5ji4RN+165d3jnnEWSh6DhGhShMjAZRfkIUqCk/JkiBZFl+vpTjY5LCbi1Geqanp01yNm7caCXkJt28eTN8JjHRYbfW5OSkHeNLxBs2bIjev39vbWzdutX2WadNBERABERABERABMoE4BQRnMJkhyV8wT958oQ9Tdx3FBte/+nTJ/f06dMIzuFv3LgRd3Z2+vHxcY/AioevUHh4XQiy2D28L2zhhB2XEplDPaM8yfbt2xN2Y+HBMbuvEFpKYFcpRQcJzClMLMaLJIj6JIj6JDCrmDIUNjb++fPnGMJkz+G+7egPERABERABERCBdUuAchO+PBykss9jBE880mocgikODoGAj/OQIodginv48KFnxOfw4cMZ5MeEB2k5HkEad/369Yg5Qc0k6MqoryAgVjafyX37sGuL0sNurBcvXiSbNm1K8OCUUkPJQTdXDedT9L+llJxm9CdB2MmsB/ZV2A+/GK8JX1ClCIiACIiACIiACJBAvV5nl1W5dBQfSA+7txy7sihA8AoH/8gQQMmRWpMjATpH+g3vdewC6+3tzT98+OAgPSHyQ5kqhAoaMjtUHW2XhaQQH5hTQplhlxZsitGelMKDB9Tw4X4KC0NRQ6AnTWFelCKTINRbiTrrFqP0MBlaP2IREAEREAEREAERaCVA0eGGeivhFg6C4xF0ydi9tWXLlhyClCMKxDKDkzjkAjnITwNOkiMQ44aGhvzRo0ez169fW9dYc+RXIT8UnwVzfNBnFp88eTI+depU9Pz5c4vyIPJTQ9dWgj63BFJTwwvVYFdsJ4GU1dBoihdipCfBi3I/ggRRfmJEhgrxwRdq/c46FgEREAEREAERWGcE4BL2jdmVhRiK4zFLuIWn/GBjyg1FJ2FPEs4xvSbCufzgwYO8lvUeyc4MsDAaE4+OjsYQoECyiPiwomIfnK8H499jJjMjizrhCC2O2qLAMKcHfXEpzCplxAcPqkFk6niRDuyb7OBhHTAx1jPBmYnPMV44xXMsigQZivGFTH5mpS68k0oREAEREAEREIH1SAAK4flBkMS6uygv3IdHOPgGywx+0YBCsJ5iNAMRiuEbCV0FU+V4+EpZluLTp0/HuJc4K9ID95jNueFOEzalxxriTbCvhCJD4UHkJkXoqI7rOhBusi4u3LcBL1NHKKpOGcL1dbwg9azGqA9kiREgy/PBl4pobc3nsAjPLFVpVwREQAREQAREYJ0RgE7MdnHBIUyA4BAZqizPBx7RgD9kkJ4M/tGg+DQ/2c6dOxuI9rArrAEfyTDfTwYfYZmDoUeusuPQdwR2TIA4uWEl4hNAI1va5uiBrHDenQQPosQwyTnFizD6U6fwILLDaE8HXrCO+jpeqoMShHN4d8v1oTQljAAx0sP2ms/A91Cic+CtUgREQAREQATWIwF4QwRfgNc4RmygErCd2S1HPeXFQReYM5xBNRp0EdSZS+A4RneY3Yd7cwhPyrwfXsNE5927dzuk49i1EJ4Cr1XgOYWQ4EyCDGkmLsfoL6thmFiKG+toNEWScx0iswGRH5OdY8eO/Vi0pB0REAEREAEREAERWAMC8Jb/3Lt378+Qowa6xj7BWVhmyEduHDhwgKO++GGekOPwdk6CGIa2M+ITpCfi0hRIBrIlKThvD20KMyXGjx49SmBlNC5LZEY9PYi5O9pEQAREQAREQAREYE0JQHzYC1WD7FhECJLD0V4M2uR0FtQnYebn1hdr29UVLkIfmc3IzFmb0V3F5Sw4MWGC0oath+tUioAIiIAIiIAIiMBaEoCOMN/YUnDoJgjOOOT6JFwuCzM+x+jy4lyEtqB6+b0q4oMwkJ3jkDAMW+cNEXJ8ODGhzcRM8eGGi1iUE5XLbWpfBERABERABERABFaTgHkIeqAiBmaQ32OrR9B/muIz77MlL/Oi0QkREAEREAEREIFvmQClZ6nvJ/FZKjFdLwIiIAIiIAIi8E0QQMSnMk/PYl6q0tXFpdw50yHGvHO2RM+ZETG03cbUY3QZerqQTWQpPrZbWfJ9MQ/TNSIgAiIgAiIgAiLwFQhQRBwiPra+BZOcsc+B8B7LWCzY/IIRn6mpKc+saIyLtxVSkSjk8eEqqTka5/h6bSIgAiIgAiIgAiKw5gToIRhgbut3mfHAhLjsBcUHExt6DNDiTNAeEzNz1Hrxfoz4MExkfWRhjDvm8eEaGB725LFkBaeC5voZOebxyTiLM+bxYQL1gtJUPEE7IiACIiACIiACIvAVCSCzmUtXZJQfRHtyuInDCPQc8/g4zD/IxU1tgdN2j6x0dfECmhGiOtHx48cjTFDoJicnU4aQMD6e6255TgbEcfIQIU61GOG5HOJlbYey3YPa1UHO2lWvuI7tlt9ltZ6z4hddYQO/pO9V/pn9kr7XCn/E383ty/mZlX/m5S+6nLbK92t/fRNo/fvTehz+b2itX9/Ufv72gU+o+ZY4hXdhidHmW+kiiMHkOGbPFLu6PEZ0eU5WiBHpEWZutq9RWqHdjueID2txg6fQMOqDHB9aVcxpnxHpYfdWjiUsuOK6WQuniyao8LFW8UcrvFCvUgRE4MsEwi/4l69cmyv0+7w2nPWU1Sfwrf1urf43XtoTlstntf+NKL8X3ITLVLyB6DSaa3VZBg4jP4j6OEZ/GLjBN+daXeYqWKvLQHDpCgvVoEErcaJ1dfYEMzdzlfVidXY8pIY+M1udHdNC/0TxoSRxC71fBFB+STv5nf2x2j/E7wyHXlcEREAE1i0B/X/w///RB6dgCSdhcOUWlqz4PSI9OVZnn4H0ZEjN4RIV+aFDhxoYnGUru584cYICZBIUvkUl4gMTMjNCWIjn3dWrV7lkhevq6orQb8ZurohLWTCUBOOyUV1IJGKEaE6ER39RAmKVIrA2BPQ7tzac9RQREIG1J8B/35hew2gPgyzsdULZQA4yk5szdG8xv8fcBMEYPzQ05DFKfU4+Ddppvzp7+Erd3d3s8vJ37tyJOjs7ue/QZ8Yl32ucCprX8QX4IniJcJuV+ke4gkMHIiACIiACIiACKyBA30A3lrWAfTqJJTMjOOOYloNIj6Pw0FsoPRyRjovnyI9FfIKkhFBSeC8OX0f4iEPabdEv5PlEjPBAdBooC9NhHZKfrXuLLxbaC+2oFAEREAEREAEREIHlEAhugryesl/QTWbQlZVjJDqHrZv09Pb25uid8pyPEM8qf4pHhyHp4SRPhH2HGx0SmpncbBnTTG7GA7jUu1lWaIWywxfiy5U/4bxKERABERABERABEVgOAQZT+AnRHraBY4e5BvObN296DLjKIEDZ2bNnM0iPm56edkxmLs/dE9qwe1tegiuwl6vYnRVjiHvMFdrRWHL+/Hnm+ZgwIbz0IVzMvjdGfbiFB7DUJgIiIAIiIAIiIALLIRCchMEV9i6Vtn9j/3c3btywVJy7d+9yCLvNO8jh7M15CXm5SQ18pJCbEPEptVXZtQsHBgYsbLRv3z7LjGa2NKNA5SvLUZ9QH144HKsUAREQAREQAREQgcUSCIGUcrSnea8fGxsz0WGUh37CyZbpK+E8yrBfeVy7kMycqA/CRfHw8HDc398fMfKDLrCIx8j/iXt6ekKDMSI+v0bk5xYqauFlFfUJeFSKgAiIgAiIgAgslkAInqD8B5ah+OPExETU19dnI8q5wsTIyEjEQVjMRw45PezeCqtQhOeUoz2saxfx8UFamjd5SA6tiSZleT/cZx8apCfH5EB8CYdr3Pj4+DBe8F/hZXl/eZ/H2kRABERABERABERgMQTgIzO47hKWzMohPZw00NE7kHKTI/WGuT356OioeQjOBV8pIj2t0sNntov4sL7YIC6VazjJIU9y9kNujAbBrmyff6CP7Rju+REPq4wYo0xpEwEREAEREAEREIGFCDBgQmdg7jDKv966detPpS4sS1ou5fCwqUJ0eND0jUod68NWmcAwVJZLNFC+OR4cHCyfDiGlog6THt47d+7cP1FxNlTyJRT5CTRUioAIiIAIiIAILESgKT0zmCPwL0xWxrWFi5SDLaGNpuzwsLgunGstlxqGac3/qbQXokEXL178FUTnvzhZ5PpULtSBCIiACIiACIiACCxM4O+YmPAPHJrOLawu0e6W1RSfds9jXSFQIbKDLq+/Yf83eBnrk8O+JSTN14DqRUAEREAEREAERAAEYo4Ux/w8v8X+TySyFLHh9Qtt/wMAfnVXGyDtwgAAAABJRU5ErkJggg==) no-repeat;\r\n  background-position-x: center;\r\n  position: relative;\r\n  margin: 40px 0 40px 0;\r\n}\r\n\r\n.row{\r\n  white-space: nowrap;\r\n  margin-top: 10px;\r\n  padding: 0 10px;\r\n  text-align: center;\r\n  display: flex;\r\n}\r\n\r\n\r\n.seat-content{\r\n  margin-bottom: 40px;\r\n  overflow-x: scroll;\r\n  width: 90%;\r\n  padding: 10px;\r\n}\r\n\r\n.poster{\r\n  width: 115px;\r\n  height: 158px;\r\n}\r\n\r\n.poster>img{\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.right-header{\r\n  display: flex;\r\n}\r\n\r\n.movie-info{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-left: 20px;\r\n}\r\n\r\n.info-item{\r\n  display: flex;\r\n  margin: 15px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.info-item :first-child{\r\n  color: #999999;\r\n}\r\n\r\n.seat-chose{\r\n  margin-top: 20px;\r\n  margin-left: 42px;\r\n  margin-bottom: 20px;\r\n  position: relative;\r\n  top: -5px;\r\n}\r\n\r\n.ticket{\r\n  cursor: default;\r\n  position: relative;\r\n  font-size: 13px;\r\n  color: #f03d37;\r\n  display: inline-block;\r\n  width: 60px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  margin: 0 12px 10px 0;\r\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAeCAYAAABwmH1PAAAAAXNSR0IArs4c6QAAAXlJREFUWAlj/Oho7cXAzLTg/89fogzDGDCys71m+PsvgeGji+2r38eP/h/u4Pexo/9BfmUCxSyLhdUwjluI11gsrRhAfmUa9j5F8+Coh9ECZNhxR2N42EUpmodGZgx/TYz9+nvzhn9ogTEsuUysDGxS/548jP4+qe/0l6zUL//fvh2WHoV5ihHGALa0GD872rQxamrm8EybzQMTH070RzsLBngeZmRk/M+7/0jVv9s3rw7n5A33MCgmQZ4GRnn7r3Vrvw+nmEX2C4qHQRLMPxlO/X38kA1Z0XBiY3h4OHkOm18wPPyXncGMWVb+FzbFw0EMxcOgkvo/A0MlW1Aw53DwHDY/wD0Mq5aYVNW1WX0D4OLYNA1lMZavtraSoGT8ydWukklTU5u7uWNY1sGwSGL5zfDrGYuM6ldQMh7OMQv3MIjBPX8xN0xguNPDNq/iirhRD+MKmeEiPhrDwyUmcflj5MUwaM7lz/FjuAJk2IiD/AjyK+NIm0wDAACxUs8MaULTAAAAAElFTkSuQmCC) no-repeat;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}