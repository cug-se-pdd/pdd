{"remainingRequest":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\src\\views\\pay\\BillDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\src\\views\\pay\\BillDetail.vue","mtime":1715333545745},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002107957},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\babel-loader\\lib\\index.js","mtime":1715002107113},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715002107957},{"path":"D:\\javaProjects\\pqq\\CinemaBookingSystem\\panda-user\\node_modules\\vue-loader\\lib\\index.js","mtime":1715002115483}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkJpbGxEZXRhaWwiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBiaWxsSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5iaWxsSWQsDQogICAgICBiaWxsSW5mbzogew0KICAgICAgICBzeXNTZXNzaW9uOiB7DQogICAgICAgICAgc3lzTW92aWU6IHt9LA0KICAgICAgICAgIHN5c0hhbGw6IHsNCiAgICAgICAgICAgIHN5c0NpbmVtYTogew0KICAgICAgICAgICAgICB1c2VyOiB7fQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdXJsOltdDQogICAgICAgICwNCiAgICAgIH0sDQogICAgICBiaWxsU2VhdHM6IFtdLA0KICAgICAgcGF5U3RhdGU6IG51bGwsDQogICAgICB1cmw6bnVsbCwNCiAgICAgIGNhbmNlbFN0YXRlOiBudWxsLA0KICAgICAgY2FuY2VsVGltZTogbnVsbCwNCiAgICAgIC8v6K6h5pe2DQogICAgICBtaW51dGVzOiAxLA0KICAgICAgc2Vjb25kczogMCwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgcG9zdGVyOiBbXSwNCiAgICAgIHBpY3R1cmVMaXN0OiBbXSwNCiAgICAgIGltYWdlU3JjOltdLA0KICAgICAgaHR0cFVSTDogdGhpcy5nbG9iYWwuYmFzZQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldEJpbGxJbmZvKCkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmFkZCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBnZXRCaWxsSW5mbygpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJ0aGlzLmJpbGxJZDoiLCB0aGlzLmJpbGxJZCk7IC8vIOi+k+WHuiB0aGlzLmJpbGxJZCDnmoTlgLwNCiAgICAgIGNvbnN0IHsgZGF0YSA6IHJlcyB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNCaWxsLycgKyB0aGlzLmJpbGxJZCkNCiAgICAgIGlmKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bkv6Hmga/lpLHotKUnKQ0KICAgICAgbGV0IHVzZXJJZCA9IEpTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2luVXNlcicpKS51c2VySWQNCiAgICAgIGlmICh1c2VySWQgIT09IHJlcy5kYXRhLnVzZXJJZCkgew0KICAgICAgICB0aGlzLiRhbGVydCgn6Z2e5rOV5pON5L2c77yB5pON5L2c6Z2e5pys5Lq66aKE57qm44CCJywgJ+mdnuazleaTjeS9nOmihOe6puitpuWRiicsIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+aIkeefpemBk+S6hicsDQogICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2JpbGwnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmJpbGxJbmZvID0gcmVzLmRhdGENCg0KICAgICAgdGhpcy5jYW5jZWxUaW1lID0gdGhpcy5iaWxsSW5mby5jYW5jZWxUaW1lDQogICAgICB0aGlzLnVybD10aGlzLmJpbGxJbmZvLnVybA0KICAgICAgdGhpcy5pbWFnZVNyYz10aGlzLmJpbGxJbmZvLnVybA0KDQoNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYmlsbEluZm8pDQogICAgICAvLyDmiKrmraLml7bpl7QNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYmlsbEluZm8uZGVhZGxpbmUpDQogICAgICAvL+WkhOeQhumihOe6puW6p+S9jeS/oeaBrw0KICAgICAgdGhpcy5iaWxsU2VhdHMgPSBKU09OLnBhcnNlKHRoaXMuYmlsbEluZm8uc2VhdHMpDQogICAgICB0aGlzLnBheVN0YXRlID0gdGhpcy5iaWxsSW5mby5wYXlTdGF0ZQ0KICAgICAgdGhpcy5jYW5jZWxTdGF0ZSA9IHRoaXMuYmlsbEluZm8uY2FuY2VsU3RhdGUNCiAgICAgIGNvbnNvbGUubG9nKCd0aGUgY3JlYXRlX3RpbWUnK3RoaXMuYmlsbEluZm8uY3JlYXRlVGltZSkNCiAgICAgIHRoaXMuYmlsbEluZm8udXJsID0gSlNPTi5wYXJzZSh0aGlzLmJpbGxJbmZvLnVybCkubWFwKChvYmosIGluZGV4KSA9PiB7DQogICAgICAgIHJldHVybiB0aGlzLmh0dHBVUkwgKyBvYmoNCiAgICAgIH0pDQogICAgICB0aGlzLmNvbXB1dGVMZWZ0VGltZSgpDQogICAgfSwNCiAgICBhc3luYyBwYXlGb3JCaWxsKCkgew0KICAgICAgYXdhaXQgdGhpcy5zdWJtaXRGaWxlUCgpDQogICAgICAvL+abtOaWsOmihOe6pueKtuaAgQ0KICAgICAgdGhpcy5iaWxsSW5mby5wYXlTdGF0ZSA9IHRydWUNCiAgICAgIHRoaXMuYmlsbEluZm8udXJsPUpTT04uc3RyaW5naWZ5KHRoaXMucGljdHVyZUxpc3QpDQogICAgICAvL+abtOaWsOmihOe6puS/oeaBr+WSjOWcuuasoeW6p+S9jeS/oeaBrw0KICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5wdXRbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICBjb25zdCB7IGRhdGE6IHJlc30gPSBhd2FpdCBheGlvcy5wdXQoJ3N5c0JpbGwnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmJpbGxJbmZvKSkNCiAgICAgIGlmKHJlcy5jb2RlICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlK/ku5jlpLHotKUnKQ0KICAgICAgdGhpcy5wYXlTdGF0ZSA9IHRydWUNCiAgICAgIHRoaXMuJGFsZXJ0KCfpooTnuqbmiJDlip/vvIHmgqjlj6/ku6XliY3lvoDkuKrkurrkuK3lv4Pmn6XnnIvpooTnuqbkv6Hmga8nLCAn6aKE57qm6YCa55+lJywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+aIkeefpemBk+S6hicsDQogICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYmlsbCcpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgew0KICAgICAgdGhpcy5pbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpOw0KICAgIH0sDQogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsNCiAgICAgIGNvbnN0IGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7DQogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7DQoNCiAgICAgIGlmICghaXNKUEcpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7DQogICAgICB9DQogICAgICBpZiAoIWlzTHQyTSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsNCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZShmaWxlKSB7DQogICAgICBjb25zb2xlLmxvZyhmaWxlKTsNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZVAoZmlsZSwgZmlsZWxpc3QpIHsNCiAgICAgIHRoaXMucG9zdGVyID0gZmlsZWxpc3QNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucG9zdGVyKQ0KICAgIH0sDQogICAgaGFuZGxlU3VjY2Vzc1AocmVzcG9uc2UpIHsNCiAgICAgIHRoaXMucGljdHVyZUxpc3QucHVzaChyZXNwb25zZS5kYXRhKQ0KICAgICAgdGhpcy5hZGRGb3JtID0gSlNPTi5zdHJpbmdpZnkodGhpcy5waWN0dXJlTGlzdCkNCiAgICAgIHRoaXMuZWRpdEZvcm0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBpY3R1cmVMaXN0KQ0KICAgIH0sDQogICAgaGFuZGxlRXJyb3IoZXJyKSB7DQogICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgfSwNCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgew0KICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGFzeW5jIHN1Ym1pdEZpbGVQKCkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9zdGVyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgIGlmICh0aGlzLnBvc3RlcltpXS5zdGF0dXMgPT09ICdzdWNjZXNzJykgew0KICAgICAgICAgIGxldCBzID0gdGhpcy5wb3N0ZXJbaV0udXJsDQogICAgICAgICAgdGhpcy5waWN0dXJlTGlzdC5wdXNoKHMuc3Vic3RyaW5nKHMuaW5kZXhPZignL2ltYWdlcycpKSkNCiAgICAgICAgICBjb250aW51ZQ0KICAgICAgICB9DQogICAgICAgIGxldCBmaWxlID0gdGhpcy5wb3N0ZXJbaV0ucmF3DQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpDQogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ3VwbG9hZC9iaWxsJywgZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIF90aGlzLnBpY3R1cmVMaXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlRG93bmxvYWQoZmlsZSkgew0KICAgICAgY29uc29sZS5sb2coZmlsZSk7DQogICAgfSwNCiAgICBhc3luYyBjYW5jZWxGb3JCaWxsKCkgew0KICAgICAgLy/mm7TmlrDpooTnuqbnirbmgIENCiAgICAgIHRoaXMuYmlsbEluZm8uY2FuY2VsU3RhdGUgPSB0cnVlDQogICAgICB0aGlzLmJpbGxJbmZvLmNhbmNlbFRpbWUgPSBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykNCiAgICAgIC8vIOiOt+WPluWcuuasoeW6p+S9jeS/oeaBrw0KICAgICAgY29uc3QgeyBkYXRhIDogY3VyU2Vzc2lvbiB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNTZXNzaW9uL2ZpbmQvJyArIHRoaXMuYmlsbEluZm8uc2Vzc2lvbklkKQ0KICAgICAgbGV0IHNlc3Npb25TZWF0cyA9IEpTT04ucGFyc2UoY3VyU2Vzc2lvbi5kYXRhLnNlc3Npb25TZWF0cykNCiAgICAgIC8vIOino+aekOWHuumihOe6pumAieaLqeeahOW6p+S9je+8jOabtOaWsOW6p+S9jeS/oeaBrw0KICAgICAgZm9yKGxldCBzZWF0IG9mIHRoaXMuYmlsbFNlYXRzKXsNCiAgICAgICAgbGV0IHJvdyA9IHNlYXQuc3Vic3RyaW5nKDAsIHNlYXQuaW5kZXhPZign5o6SJykpDQogICAgICAgIGxldCBjb2wgPSBOdW1iZXIucGFyc2VJbnQoc2VhdC5zdWJzdHJpbmcoc2VhdC5pbmRleE9mKCfmjpInKSArIDEsIHNlYXQubGVuZ3RoIC0gMSkpDQogICAgICAgIHNlc3Npb25TZWF0c1tyb3ddW2NvbCAtIDFdID0gMA0KICAgICAgfQ0KICAgICAgLy8g5pu05paw6aKE57qm5L+h5oGv5ZKM5Zy65qyh5bqn5L2N5L+h5oGvDQogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnB1dFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCBheGlvcy5wdXQoJ3N5c0JpbGwvY2FuY2VsJyxKU09OLnN0cmluZ2lmeSh7c3lzQmlsbDogdGhpcy5iaWxsSW5mbywgc2Vzc2lvblNlYXRzOiBKU09OLnN0cmluZ2lmeShzZXNzaW9uU2VhdHMpfSkpDQogICAgICBpZihyZXMuY29kZSAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+W5raI5aSx6LSlJykNCg0KICAgICAgdGhpcy5wYXlTdGF0ZSA9IGZhbHNlDQogICAgICB0aGlzLmNhbmNlbFN0YXRlID0gdHJ1ZQ0KICAgICAgdGhpcy4kYWxlcnQoJ+WPlua2iOaIkOWKn++8geaCqOWPr+S7peWJjeW+gOS4quS6uuS4reW/g+afpeeci+mihOe6puS/oeaBrycsICflj5bmtojpgJrnn6UnLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5oiR55+l6YGT5LqGJywNCiAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9iaWxsRGV0YWlsLycgKyB0aGlzLmJpbGxJbmZvLmJpbGxJZCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNvbXB1dGVMZWZ0VGltZSgpIHsNCiAgICAgIGxldCBjdXIgPSBuZXcgRGF0ZSgpDQogICAgICBsZXQgY3JlYXRlVGltZSA9IG5ldyBEYXRlKHRoaXMuYmlsbEluZm8uY3JlYXRlVGltZSkNCiAgICAgIGxldCBkaWZmID0gMTUgKiA2MCAtIChjdXIgLSBjcmVhdGVUaW1lKSAvIDEwMDANCiAgICAgIGlmIChkaWZmIDwgMCkgew0KICAgICAgICB0aGlzLm1pbnV0ZXMgPSAwDQogICAgICAgIHRoaXMuc2Vjb25kcyA9IDANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubWludXRlcyA9IE1hdGguZmxvb3IoZGlmZiAvIDYwKQ0KICAgICAgICB0aGlzLnNlY29uZHMgPSBNYXRoLmZsb29yKGRpZmYgJSA2MCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUV4Y2VlZCgpew0KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5rS75Yqo5bCB6Z2i5LiN6IO96LaF6L+H5LiA5bygIScpDQogICAgfSwNCiAgICAvL+iuoeaXtui9rOaNouaVsOWtl+agvOW8jw0KICAgIG51bTogZnVuY3Rpb24gKG4pIHsNCiAgICAgIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuIDogJycgKyBuDQogICAgfSwNCiAgICAvL+iuoeaXtui1sOWKqA0KICAgIGFkZDogZnVuY3Rpb24gKCkgew0KICAgICAgbGV0IF90aGlzID0gdGhpcw0KICAgICAgbGV0IHRpbWUgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoX3RoaXMuc2Vjb25kcyA9PT0gMCAmJiBfdGhpcy5taW51dGVzICE9PSAwKSB7DQogICAgICAgICAgX3RoaXMuc2Vjb25kcyA9IDU5DQogICAgICAgICAgX3RoaXMubWludXRlcyAtPSAxDQogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMubWludXRlcyA9PT0gMCAmJiBfdGhpcy5zZWNvbmRzID09PSAwKSB7DQogICAgICAgICAgX3RoaXMuc2Vjb25kcyA9IDANCiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIF90aGlzLnNlY29uZHMgLT0gMQ0KICAgICAgICB9DQogICAgICB9LCAxMDAwKQ0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgc2Vjb25kOiB7DQogICAgICBoYW5kbGVyIChuZXdWYWwpIHsNCiAgICAgICAgdGhpcy5udW0obmV3VmFsKQ0KICAgICAgfQ0KICAgIH0sDQogICAgbWludXRlOiB7DQogICAgICBoYW5kbGVyIChuZXdWYWwpIHsNCiAgICAgICAgdGhpcy5udW0obmV3VmFsKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBzZWNvbmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiB0aGlzLm51bSh0aGlzLnNlY29uZHMpDQogICAgfSwNCiAgICBtaW51dGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiB0aGlzLm51bSh0aGlzLm1pbnV0ZXMpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["BillDetail.vue"],"names":[],"mappings":";AAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BillDetail.vue","sourceRoot":"src/views/pay","sourcesContent":["<template>\r\n  <div>\r\n    <el-steps :active=\"3\" align-center>\r\n      <el-step title=\"选择活动场次\"></el-step>\r\n      <el-step title=\"选择座位\"></el-step>\r\n      <el-step title=\"15分钟内提交\"></el-step>\r\n      <el-step title=\"活动地点取票观影\" status=\"wait\"></el-step>\r\n    </el-steps>\r\n    <div class=\"bill-info-container\">\r\n      <!-- 预约状态 -->\r\n      <!-- 未支付，未取消，15分钟内 -->\r\n      <div class=\"bill-info-status\" v-if=\"payState === false && cancelState === false && (minutes > 0 || seconds > 0)\">\r\n        <div class=\"pay-icon\">\r\n          <img src=\"../../assets/money.png\">\r\n        </div>\r\n        <div class=\"pay-info\">\r\n          <div class=\"pay-info-status\">验证</div>\r\n          <div class=\"pay-info-desc\">请在<span>{{minutes}}分钟{{seconds}}秒</span>内完成验证</div>\r\n\r\n        </div>\r\n      </div>\r\n      <!-- 未支付，超时取消，15分钟 -->\r\n      <div class=\"bill-info-status invalid\" v-if=\"payState === false && cancelState === true && cancelTime === null && minutes <= 0 && seconds <= 0\">\r\n        <div class=\"pay-icon\">\r\n          <img src=\"../../assets/bill-invalid.png\">\r\n        </div>\r\n        <div class=\"pay-info\">\r\n          <div class=\"pay-info-status invalid\">由于预约超时未提交，已失效</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"bill-info-status finish\" v-if=\"payState === true\">\r\n        <div class=\"pay-icon\">\r\n          <img src=\"../../assets/finish.png\">\r\n        </div>\r\n        <div class=\"pay-info\">\r\n          <div class=\"pay-info-status finish\">已完成</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"bill-info-status invalid\" v-if=\"cancelState === true && cancelTime !== null\">\r\n        <div class=\"pay-icon\">\r\n          <img src=\"../../assets/bill-invalid.png\">\r\n        </div>\r\n        <div class=\"pay-info\">\r\n          <div class=\"pay-info-status invalid\">预约已取消</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 预约信息 -->\r\n      <div class=\"bill-info-desc\">\r\n        <div class=\"bill-info-header\">\r\n          <span>预约编号: {{billInfo.billId}}</span>\r\n          <span class=\"bill-info-helper\">\r\n            (有预约问题可拨打客服电话<div>{{billInfo.sysSession.sysHall.sysCinema.cinemaPhone}}</div>，\r\n            工作时间: {{billInfo.sysSession.sysHall.sysCinema.workStartTime}}-{{billInfo.sysSession.sysHall.sysCinema.workEndTime}})</span>\r\n        </div>\r\n\r\n        <table class=\"order-table\">\r\n          <thead>\r\n          <tr>\r\n            <th>活动</th>\r\n<!--            <th>语言版本</th>-->\r\n            <th>活动时间</th>\r\n<!--            <th>座位{{billInfo.url}}</th>-->\r\n            <th>座位</th>\r\n            <th>提示信息</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr>\r\n            <td class=\"movie-name\">《{{billInfo.sysSession.sysMovie.movieName}}》</td>\r\n<!--            <td class=\"movie-name\">{{billInfo.sysSession.languageVersion}}</td>-->\r\n            <td class=\"showtime\">{{billInfo.sysSession.sessionDate}} {{billInfo.sysSession.playTime}} - {{billInfo.sysSession.endTime}}</td>\r\n            <td>\r\n              <span class=\"hall\">{{billInfo.sysSession.sysHall.hallName}}</span>\r\n              <div class=\"seats\">\r\n                <span class=\"bill-seat\" v-for=\"item in billSeats\" :key=\"item\"> {{item}} </span>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <span>{{billInfo.sysSession.sessionTips}}</span>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <!-- 活动地点信息、提交预约 -->\r\n      <div class=\"bill-info-area\">\r\n        <el-row :gutter=\"20\" type=\"flex\" justify=\"center\">\r\n          <el-col :span=\"18\">\r\n\r\n\r\n\r\n\r\n        <div class=\"cinema-info\">\r\n          <span class=\"bill-cinema-name\">{{ billInfo.sysSession.sysMovie.movieName }}</span>\r\n          <div class=\"bill-cinema-info\">\r\n            <span>活动要求：\r\n              {{ billInfo.sysSession.sysMovie.movieArea }} </span>\r\n\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 统一位置的Upload和Image组件 -->\r\n\r\n        <div class=\"upload-image-container\">\r\n          <!-- 上传组件：当还未支付且未取消，并且时间还剩余时显示 -->\r\n\r\n          <el-upload\r\n            v-if=\"payState === false && cancelState === false && (minutes > 0 || seconds > 0)\"\r\n            action=\"#\"\r\n            list-type=\"picture-card\"\r\n            :file-list=\"poster\"\r\n            :on-exceed=\"handleExceed\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handleChangeP\"\r\n            :on-success=\"handleSuccessP\"\r\n            :on-error=\"handleError\"\r\n            ref=\"posterRef\"\r\n            :http-request=\"submitFileP\"\r\n            class=\"upload-component\"\r\n          >\r\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n            <div slot=\"file\" slot-scope=\"{ file }\">\r\n              <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\r\n              <span class=\"el-upload-list__item-actions\">\r\n          <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n            <i class=\"el-icon-zoom-in\"></i>\r\n          </span>\r\n          <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </span>\r\n            </div>\r\n          </el-upload>\r\n          <!-- 图像显示组件：当支付已完成或条件不满足显示上传组件时显示 -->\r\n          <div v-else class=\"image-component\">\r\n<!--            <el-image-->\r\n<!--              fit=\"cover\"-->\r\n<!--              class=\"default-img\"-->\r\n<!--              v-for=\"(item,index) in billInfo.url\"-->\r\n<!--              :key=\"index\"-->\r\n<!--              :src=\"item\"-->\r\n<!--              :preview-src-list=\"billInfo.url\">-->\r\n<!--            ></el-image>-->\r\n            <el-carousel :interval=\"4000\" type=\"card\" height=\"400px\">\r\n              <el-carousel-item  v-for=\"(item,index) in billInfo.url\"\r\n                                 :key=\"index\"\r\n                                 :src=\"item\">\r\n                <el-image style=\"width: 400px; height: 400px\" :src=\"item\" :fit=\"contain\"/>\r\n              </el-carousel-item>\r\n            </el-carousel>\r\n          </div>\r\n\r\n          <div class=\"tag\">\r\n            <el-tag type=\"info\">按活动要求上传验证图片</el-tag>\r\n          </div>\r\n\r\n        </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row type=\"flex\" justify=\"center\" class=\"button-row\">\r\n          <el-col :span=\"12\">\r\n            <div class=\"button-group\" v-if=\"payState === false && cancelState === false && (minutes > 0 || seconds > 0)\">\r\n              <el-button @click=\"payForBill\" type=\"primary\" style=\"margin-right: 10px;\" round>提交预约</el-button>\r\n              <el-button @click=\"cancelForBill\" type=\"danger\" round>取消预约</el-button>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n\r\n\r\n\r\n\r\n      </div>\r\n\r\n    </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nexport default {\r\n  name: \"BillDetail\",\r\n  data() {\r\n    return {\r\n      billId: this.$route.params.billId,\r\n      billInfo: {\r\n        sysSession: {\r\n          sysMovie: {},\r\n          sysHall: {\r\n            sysCinema: {\r\n              user: {}\r\n            }\r\n          }\r\n        },\r\n        url:[]\r\n        ,\r\n      },\r\n      billSeats: [],\r\n      payState: null,\r\n      url:null,\r\n      cancelState: null,\r\n      cancelTime: null,\r\n      //计时\r\n      minutes: 1,\r\n      seconds: 0,\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      disabled: false,\r\n      poster: [],\r\n      pictureList: [],\r\n      imageSrc:[],\r\n      httpURL: this.global.base\r\n    }\r\n  },\r\n  created() {\r\n    this.getBillInfo()\r\n  },\r\n  mounted() {\r\n    this.add()\r\n  },\r\n  methods: {\r\n    async getBillInfo() {\r\n      // console.log(\"this.billId:\", this.billId); // 输出 this.billId 的值\r\n      const { data : res } = await axios.get('sysBill/' + this.billId)\r\n      if(res.code !== 200) return this.$message.error('获取信息失败')\r\n      let userId = JSON.parse(window.sessionStorage.getItem('loginUser')).userId\r\n      if (userId !== res.data.userId) {\r\n        this.$alert('非法操作！操作非本人预约。', '非法操作预约警告', {\r\n          confirmButtonText: '我知道了',\r\n          callback: action => {\r\n            this.$router.push('/bill')\r\n          }\r\n        })\r\n        return\r\n      }\r\n      this.billInfo = res.data\r\n\r\n      this.cancelTime = this.billInfo.cancelTime\r\n      this.url=this.billInfo.url\r\n      this.imageSrc=this.billInfo.url\r\n\r\n\r\n      console.log(this.billInfo)\r\n      // 截止时间\r\n      console.log(this.billInfo.deadline)\r\n      //处理预约座位信息\r\n      this.billSeats = JSON.parse(this.billInfo.seats)\r\n      this.payState = this.billInfo.payState\r\n      this.cancelState = this.billInfo.cancelState\r\n      console.log('the create_time'+this.billInfo.createTime)\r\n      this.billInfo.url = JSON.parse(this.billInfo.url).map((obj, index) => {\r\n        return this.httpURL + obj\r\n      })\r\n      this.computeLeftTime()\r\n    },\r\n    async payForBill() {\r\n      await this.submitFileP()\r\n      //更新预约状态\r\n      this.billInfo.payState = true\r\n      this.billInfo.url=JSON.stringify(this.pictureList)\r\n      //更新预约信息和场次座位信息\r\n      axios.defaults.headers.put['Content-Type'] = 'application/json'\r\n      const { data: res} = await axios.put('sysBill', JSON.stringify(this.billInfo))\r\n      if(res.code !== 200) return this.$message.error('支付失败')\r\n      this.payState = true\r\n      this.$alert('预约成功！您可以前往个人中心查看预约信息', '预约通知', {\r\n        confirmButtonText: '我知道了',\r\n        callback: action => {\r\n          this.$router.push('/bill')\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg';\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    handleRemove(file) {\r\n      console.log(file);\r\n    },\r\n    handleChangeP(file, filelist) {\r\n      this.poster = filelist\r\n      console.log(this.poster)\r\n    },\r\n    handleSuccessP(response) {\r\n      this.pictureList.push(response.data)\r\n      this.addForm = JSON.stringify(this.pictureList)\r\n      this.editForm = JSON.stringify(this.pictureList)\r\n    },\r\n    handleError(err) {\r\n      console.log(err)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    async submitFileP() {\r\n      const _this = this\r\n      for (let i = 0; i < this.poster.length; i++) {\r\n        let formData = new FormData()\r\n        if (this.poster[i].status === 'success') {\r\n          let s = this.poster[i].url\r\n          this.pictureList.push(s.substring(s.indexOf('/images')))\r\n          continue\r\n        }\r\n        let file = this.poster[i].raw\r\n        formData.append('file', file)\r\n        await axios.post('upload/bill', formData).then(response => {\r\n          _this.pictureList.push(response.data.data)\r\n        })\r\n      }\r\n    },\r\n    handleDownload(file) {\r\n      console.log(file);\r\n    },\r\n    async cancelForBill() {\r\n      //更新预约状态\r\n      this.billInfo.cancelState = true\r\n      this.billInfo.cancelTime = moment(new Date()).format('YYYY-MM-DD HH:mm:ss')\r\n      // 获取场次座位信息\r\n      const { data : curSession } = await axios.get('sysSession/find/' + this.billInfo.sessionId)\r\n      let sessionSeats = JSON.parse(curSession.data.sessionSeats)\r\n      // 解析出预约选择的座位，更新座位信息\r\n      for(let seat of this.billSeats){\r\n        let row = seat.substring(0, seat.indexOf('排'))\r\n        let col = Number.parseInt(seat.substring(seat.indexOf('排') + 1, seat.length - 1))\r\n        sessionSeats[row][col - 1] = 0\r\n      }\r\n      // 更新预约信息和场次座位信息\r\n      axios.defaults.headers.put['Content-Type'] = 'application/json'\r\n      const { data: res } = await axios.put('sysBill/cancel',JSON.stringify({sysBill: this.billInfo, sessionSeats: JSON.stringify(sessionSeats)}))\r\n      if(res.code !== 200) return this.$message.error('取消失败')\r\n\r\n      this.payState = false\r\n      this.cancelState = true\r\n      this.$alert('取消成功！您可以前往个人中心查看预约信息', '取消通知', {\r\n        confirmButtonText: '我知道了',\r\n        callback: action => {\r\n          this.$router.push('/billDetail/' + this.billInfo.billId)\r\n        }\r\n      })\r\n    },\r\n    computeLeftTime() {\r\n      let cur = new Date()\r\n      let createTime = new Date(this.billInfo.createTime)\r\n      let diff = 15 * 60 - (cur - createTime) / 1000\r\n      if (diff < 0) {\r\n        this.minutes = 0\r\n        this.seconds = 0\r\n      } else {\r\n        this.minutes = Math.floor(diff / 60)\r\n        this.seconds = Math.floor(diff % 60)\r\n      }\r\n    },\r\n    handleExceed(){\r\n      this.$message.error('活动封面不能超过一张!')\r\n    },\r\n    //计时转换数字格式\r\n    num: function (n) {\r\n      return n < 10 ? '0' + n : '' + n\r\n    },\r\n    //计时走动\r\n    add: function () {\r\n      let _this = this\r\n      let time = window.setInterval(function () {\r\n        if (_this.seconds === 0 && _this.minutes !== 0) {\r\n          _this.seconds = 59\r\n          _this.minutes -= 1\r\n        } else if (_this.minutes === 0 && _this.seconds === 0) {\r\n          _this.seconds = 0\r\n          window.clearInterval(time)\r\n        } else {\r\n          _this.seconds -= 1\r\n        }\r\n      }, 1000)\r\n    },\r\n  },\r\n  watch: {\r\n    second: {\r\n      handler (newVal) {\r\n        this.num(newVal)\r\n      }\r\n    },\r\n    minute: {\r\n      handler (newVal) {\r\n        this.num(newVal)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    second: function () {\r\n      return this.num(this.seconds)\r\n    },\r\n    minute: function () {\r\n      return this.num(this.minutes)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-step {\r\n  margin: 40px auto;\r\n}\r\n\r\n.bill-info-container{\r\n  width: 80%;\r\n  margin: 0 auto 40px auto;\r\n}\r\n\r\n.bill-info-status{\r\n  height: 120px;\r\n  background: #FFFBF2;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.pay-icon{\r\n  width: 40px;\r\n  height:40px;\r\n  margin-left: 50px;\r\n}\r\n\r\n.pay-icon>img{\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.pay-info{\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 20px;\r\n}\r\n\r\n.pay-info-status{\r\n  color: #FAAF00;\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n}\r\n\r\n.pay-info-desc{\r\n  color: #999;\r\n  font-size: 13px;\r\n}\r\n\r\n.pay-info-desc>span{\r\n  font-size: 16px;\r\n  color: #faaf00;\r\n  margin: 5px 5px;\r\n}\r\n\r\n.bill-info-status.finish{\r\n  background: #F4FFF8;\r\n}\r\n\r\n.bill-info-status.invalid{\r\n  background: #FFE0E0;\r\n}\r\n\r\n.pay-info-status.finish{\r\n  color: #26CE61;\r\n}\r\n\r\n.pay-info-status.invalid{\r\n  color: #faaaaa;\r\n}\r\n\r\n.bill-info-header{\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.bill-info-header>span>div{\r\n  color: #f03d37;\r\n}\r\n\r\n.bill-info-helper{\r\n  color: #999;\r\n  font-size: 13px;\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.order-table{\r\n  width: 100%;\r\n  border: 1px solid #e5e5e5;\r\n  border-spacing: 0;\r\n  margin-bottom: 60px;\r\n}\r\n\r\n.order-table thead {\r\n  background-color: #f7f7f7;\r\n}\r\n\r\n.order-table thead th {\r\n  font-size: 16px;\r\n  color: #333;\r\n  width: 20%;\r\n  padding: 14px 0;\r\n  font-weight: 400;\r\n}\r\n\r\n.order-table td {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n  color: #333;\r\n}\r\n\r\n.order-table .movie-name {\r\n  font-size: 16px;\r\n}\r\n\r\n.order-table .showtime {\r\n  font-size: 14px;\r\n  color: #f03d37;\r\n}\r\n\r\n.order-table .cinema-name {\r\n  font-size: 14px;\r\n}\r\n\r\n.order-table .hall {\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  color: #424242;\r\n  font-weight: 700;\r\n  margin-right: 10px;\r\n  vertical-align: top;\r\n}\r\n\r\n.order-table .seats {\r\n  display: inline-flex;\r\n  text-align: left;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.order-table .seats span{\r\n  margin-right: 5px;\r\n}\r\n\r\n.bill-info-area{\r\n\r\n}\r\n\r\n.bill-cinema-name{\r\n  font-weight: 700;\r\n}\r\n\r\n.bill-cinema-info{\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 15px;\r\n}\r\n\r\n.submit-bill{\r\n  margin-top: 40px;\r\n  position: absolute;\r\n\r\n}\r\n.upload\r\n{\r\n  margin-top: 40px;\r\n  margin-right: 10%;\r\n}\r\n\r\n.submit-bill span{\r\n  color: #f03d37;\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n}\r\n\r\n.submit-bill span:before{\r\n  content: '￥';\r\n  font-size: 20px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n\r\n.button-row {\r\n  margin-top: 20px; /* 调整按钮与上方元素的距离 */\r\n}\r\n\r\n.button-group {\r\n  text-align: center; /* 确保所有按钮都在其列内居中 */\r\n}\r\n.upload-image-container\r\n{\r\n  text-align: center; /* 确保所有按钮都在其列内居中 */\r\n  margin-top: 20px;\r\n}\r\n.cinema-info\r\n{\r\n  text-align: center;\r\n\r\n}\r\n.tag\r\n{\r\n  margin-top: 8px;\r\n  text-align: center;\r\n}\r\n\r\n</style>\r\n"]}]}